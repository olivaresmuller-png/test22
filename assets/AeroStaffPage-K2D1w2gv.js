import{c as lt,b as wt,r as p,R as ss,N as is,V as St,j as e,O as as,Q as kt,W as rs,l as J,u as ns,k as ue,q as ls,P as Ke,B as v,J as os,E as jt,K as ds,z as G,a2 as V,H as bt,T as At,Z as qe,a3 as ye,a4 as je,D as ze,d as Nt,e as Ue,f as Ge,g as Ve,i as Qe,a5 as vt,$ as Xe,I as He,_ as cs,a6 as Bt}from"./index-CI72K9i1.js";import{L as W,B as j}from"./label-z0vxqCoA.js";import{T as ms,a as us,b as Re,c as we}from"./tabs-Cj8txYyn.js";import{i as ps,C as Ct,S as se,a as ie,f as ae,b as re,e as L}from"./select-DhOR1Qsq.js";import{T as Ye,P as Ze,C as et}from"./checkbox-POL6qR8n.js";import{C as Ht,P as fs,T as tt,a as st,b as Ne,c as S,d as it,e as k}from"./table-CmNjyXus.js";import{R as xs}from"./refresh-cw-CnbzbTrk.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],gs=lt("arrow-right-left",hs);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],js=lt("hard-drive",ys);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],As=lt("play",bs);function Ns(n,o){return wt(n,-1)}function vs(n,o,{checkForDefaultPrevented:u=!0}={}){return function(B){if(n?.(B),u===!1||!B.defaultPrevented)return o?.(B)}}var Bs=ss[" useInsertionEffect ".trim().toString()]||is;function Cs({prop:n,defaultProp:o,onChange:u=()=>{},caller:N}){const[B,$,w]=Hs({defaultProp:o,onChange:u}),I=n!==void 0,A=I?n:B;{const H=p.useRef(n!==void 0);p.useEffect(()=>{const O=H.current;O!==I&&console.warn(`${N} is changing from ${O?"controlled":"uncontrolled"} to ${I?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),H.current=I},[I,N])}const le=p.useCallback(H=>{if(I){const O=Rs(H)?H(n):H;O!==n&&w.current?.(O)}else $(H)},[I,n,$,w]);return[A,le]}function Hs({defaultProp:n,onChange:o}){const[u,N]=p.useState(n),B=p.useRef(u),$=p.useRef(o);return Bs(()=>{$.current=o},[o]),p.useEffect(()=>{B.current!==u&&($.current?.(u),B.current=u)},[u,B]),[u,N,$]}function Rs(n){return typeof n=="function"}var $e="Switch",[ws]=as($e),[Ss,ks]=ws($e),It=p.forwardRef((n,o)=>{const{__scopeSwitch:u,name:N,checked:B,defaultChecked:$,required:w,disabled:I,value:A="on",onCheckedChange:le,form:H,...O}=n,[P,E]=p.useState(null),oe=St(o,fe=>E(fe)),F=p.useRef(!1),ke=P?H||!!P.closest("form"):!0,[pe,Ie]=Cs({prop:B,defaultProp:$??!1,onChange:le,caller:$e});return e.jsxs(Ss,{scope:u,checked:pe,disabled:I,children:[e.jsx(kt.button,{type:"button",role:"switch","aria-checked":pe,"aria-required":w,"data-state":Xt(pe),"data-disabled":I?"":void 0,disabled:I,value:A,...O,ref:oe,onClick:vs(n.onClick,fe=>{Ie(Oe=>!Oe),ke&&(F.current=fe.isPropagationStopped(),F.current||fe.stopPropagation())})}),ke&&e.jsx(Et,{control:P,bubbles:!F.current,name:N,value:A,checked:pe,required:w,disabled:I,form:H,style:{transform:"translateX(-100%)"}})]})});It.displayName=$e;var Lt="SwitchThumb",Jt=p.forwardRef((n,o)=>{const{__scopeSwitch:u,...N}=n,B=ks(Lt,u);return e.jsx(kt.span,{"data-state":Xt(B.checked),"data-disabled":B.disabled?"":void 0,...N,ref:o})});Jt.displayName=Lt;var Is="SwitchBubbleInput",Et=p.forwardRef(({__scopeSwitch:n,control:o,checked:u,bubbles:N=!0,...B},$)=>{const w=p.useRef(null),I=St(w,$),A=ps(u),le=rs(o);return p.useEffect(()=>{const H=w.current;if(!H)return;const O=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(O,"checked").set;if(A!==u&&E){const oe=new Event("click",{bubbles:N});E.call(H,u),H.dispatchEvent(oe)}},[A,u,N]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:u,...B,tabIndex:-1,ref:I,style:{...B.style,...le,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Et.displayName=Is;function Xt(n){return n?"checked":"unchecked"}var Mt=It,Ls=Jt;const Tt=p.forwardRef(({className:n,...o},u)=>e.jsx(Mt,{className:J("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...o,ref:u,children:e.jsx(Ls,{className:J("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Tt.displayName=Mt.displayName;const Js=1,Es=1e6;let at=0;function Xs(){return at=(at+1)%Number.MAX_SAFE_INTEGER,at.toString()}const rt=new Map,Rt=n=>{if(rt.has(n))return;const o=setTimeout(()=>{rt.delete(n),Se({type:"REMOVE_TOAST",toastId:n})},Es);rt.set(n,o)},Ms=(n,o)=>{switch(o.type){case"ADD_TOAST":return{...n,toasts:[o.toast,...n.toasts].slice(0,Js)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(u=>u.id===o.toast.id?{...u,...o.toast}:u)};case"DISMISS_TOAST":{const{toastId:u}=o;return u?Rt(u):n.toasts.forEach(N=>{Rt(N.id)}),{...n,toasts:n.toasts.map(N=>N.id===u||u===void 0?{...N,open:!1}:N)}}case"REMOVE_TOAST":return o.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(u=>u.id!==o.toastId)}}},Te=[];let De={toasts:[]};function Se(n){De=Ms(De,n),Te.forEach(o=>{o(De)})}function Ts({...n}){const o=Xs(),u=B=>Se({type:"UPDATE_TOAST",toast:{...B,id:o}}),N=()=>Se({type:"DISMISS_TOAST",toastId:o});return Se({type:"ADD_TOAST",toast:{...n,id:o,open:!0,onOpenChange:B=>{B||N()}}}),{id:o,dismiss:N,update:u}}function Ds(){const[n,o]=p.useState(De);return p.useEffect(()=>(Te.push(o),()=>{const u=Te.indexOf(o);u>-1&&Te.splice(u,1)}),[n]),{...n,toast:Ts,dismiss:u=>Se({type:"DISMISS_TOAST",toastId:u})}}const $s=["FUEL TANK","Walliclean","Forklift","CYCLEAN","Cobra","Cee Bee"],Q={"FUEL TANK":{label:"Fuel Tank Entry",color:"bg-amber-500"},Walliclean:{label:"Walliclean",color:"bg-cyan-500"},Forklift:{label:"Forklift",color:"bg-orange-500"},CYCLEAN:{label:"Cyclean",color:"bg-teal-500"},Cobra:{label:"Cobra",color:"bg-red-500"},"Cee Bee":{label:"Cee-Bee",color:"bg-indigo-500"}},Os=8,nt=n=>n<=0?0:Math.ceil(n/Os),ne={urgent:{label:"Urgent",color:"bg-red-500",order:0},high:{label:"High",color:"bg-orange-500",order:1},normal:{label:"Normal",color:"bg-blue-500",order:2},low:{label:"Low",color:"bg-gray-500",order:3}},Ps=[{id:"a350-1",registration:"HB-IFA",type:"A350",company:"LX"},{id:"a350-2",registration:"HB-IFB",type:"A350",company:"LX"},{id:"a350-3",registration:"HB-IFC",type:"A350",company:"LX"},{id:"a350-4",registration:"HB-IFD",type:"A350",company:"LX"},{id:"a350-5",registration:"HB-IFE",type:"A350",company:"LX"},{id:"a350-6",registration:"HB-IHA",type:"A350",company:"WK"},{id:"a350-7",registration:"HB-IHB",type:"A350",company:"WK"},{id:"a350-8",registration:"HB-IHC",type:"A350",company:"WK"},{id:"a350-9",registration:"HB-IHD",type:"A350",company:"WK"},{id:"a350-10",registration:"HB-IHE",type:"A350",company:"WK"},{id:"a350-11",registration:"HB-IHF",type:"A350",company:"WK"},{id:"a320cf-1",registration:"HB-IHX",type:"A320 CF",company:"WK"},{id:"a320cf-2",registration:"HB-IHY",type:"A320 CF",company:"WK"},{id:"a320cf-3",registration:"HB-IHZ",type:"A320 CF",company:"WK"},{id:"a320cf-4",registration:"HB-IJI",type:"A320 CF",company:"LX"},{id:"a320cf-5",registration:"HB-IJJ",type:"A320 CF",company:"LX"},{id:"a320cf-6",registration:"HB-IJK",type:"A320 CF",company:"LX"},{id:"a320cf-7",registration:"HB-IJL",type:"A320 CF",company:"LX"},{id:"a320cf-8",registration:"HB-IJM",type:"A320 CF",company:"LX"},{id:"a320cf-9",registration:"HB-IJN",type:"A320 CF",company:"LX"},{id:"a320cf-10",registration:"HB-IJO",type:"A320 CF",company:"LX"},{id:"a320cf-11",registration:"HB-IJP",type:"A320 CF",company:"LX"},{id:"a320cf-12",registration:"HB-IJQ",type:"A320 CF",company:"LX"},{id:"a320cf-13",registration:"HB-IJR",type:"A320 CF",company:"LX"},{id:"a320cf-14",registration:"HB-IJU",type:"A320 CF",company:"WK"},{id:"a320cf-15",registration:"HB-IJV",type:"A320 CF",company:"WK"},{id:"a320cf-16",registration:"HB-IJW",type:"A320 CF",company:"WK"},{id:"a320cf-17",registration:"HB-JJK",type:"A320 CF",company:"WK"},{id:"a320cf-18",registration:"HB-JJL",type:"A320 CF",company:"WK"},{id:"a320cf-19",registration:"HB-JJM",type:"A320 CF",company:"WK"},{id:"a320cf-20",registration:"HB-JJN",type:"A320 CF",company:"WK"},{id:"a320cf-21",registration:"HB-JLP",type:"A320 CF",company:"WK"},{id:"a320cf-22",registration:"HB-JLQ",type:"A320 CF",company:"WK"},{id:"a320cf-23",registration:"HB-JLR",type:"A320 CF",company:"WK"},{id:"a320cf-24",registration:"HB-JLS",type:"A320 CF",company:"WK"},{id:"a320cf-25",registration:"HB-JLT",type:"A320 CF",company:"WK"},{id:"a321rr-1",registration:"HB-IOD",type:"A321RR",company:"LX"},{id:"a321rr-2",registration:"HB-IOF",type:"A321RR",company:"LX"},{id:"a321rr-3",registration:"HB-IOH",type:"A321RR",company:"LX"},{id:"a321rr-4",registration:"HB-IOM",type:"A321RR",company:"LX"},{id:"a321rr-5",registration:"HB-ION",type:"A321RR",company:"LX"},{id:"a321rr-6",registration:"HB-IOO",type:"A321RR",company:"LX"},{id:"a321neo-1",registration:"HB-JPA",type:"A321 NEO",company:"LX"},{id:"a321neo-2",registration:"HB-JPB",type:"A321 NEO",company:"LX"},{id:"a321neo-3",registration:"HB-JPC",type:"A321 NEO",company:"LX"},{id:"a321neo-4",registration:"HB-JPD",type:"A321 NEO",company:"LX"},{id:"a321neo-5",registration:"HB-JPE",type:"A321 NEO",company:"LX"},{id:"a321neo-6",registration:"HB-JPF",type:"A321 NEO",company:"LX"},{id:"a321neo-7",registration:"HB-JPG",type:"A321 NEO",company:"LX"},{id:"a321neo-8",registration:"HB-JPH",type:"A321 NEO",company:"LX"},{id:"a220-1",registration:"HB-JBA",type:"A220",company:"LX"},{id:"a220-2",registration:"HB-JBB",type:"A220",company:"LX"},{id:"a220-3",registration:"HB-JBC",type:"A220",company:"LX"},{id:"a220-4",registration:"HB-JBD",type:"A220",company:"LX"},{id:"a220-5",registration:"HB-JBE",type:"A220",company:"LX"},{id:"a220-6",registration:"HB-JBF",type:"A220",company:"LX"},{id:"a220-7",registration:"HB-JBG",type:"A220",company:"LX"},{id:"a220-8",registration:"HB-JBH",type:"A220",company:"LX"},{id:"a220-9",registration:"HB-JBI",type:"A220",company:"LX"},{id:"a220-10",registration:"HB-JCA",type:"A220",company:"LX"},{id:"a220-11",registration:"HB-JCB",type:"A220",company:"LX"},{id:"a220-12",registration:"HB-JCC",type:"A220",company:"LX"},{id:"a220-13",registration:"HB-JCD",type:"A220",company:"LX"},{id:"a220-14",registration:"HB-JCE",type:"A220",company:"LX"},{id:"a220-15",registration:"HB-JCF",type:"A220",company:"LX"},{id:"a220-16",registration:"HB-JCG",type:"A220",company:"LX"},{id:"a220-17",registration:"HB-JCH",type:"A220",company:"LX"},{id:"a220-18",registration:"HB-JCI",type:"A220",company:"LX"},{id:"a220-19",registration:"HB-JCJ",type:"A220",company:"LX"},{id:"a220-20",registration:"HB-JCK",type:"A220",company:"LX"},{id:"a220-21",registration:"HB-JCL",type:"A220",company:"LX"},{id:"a220-22",registration:"HB-JCM",type:"A220",company:"LX"},{id:"a220-23",registration:"HB-JCN",type:"A220",company:"LX"},{id:"a220-24",registration:"HB-JCO",type:"A220",company:"LX"},{id:"a220-25",registration:"HB-JCP",type:"A220",company:"LX"},{id:"a220-26",registration:"HB-JCQ",type:"A220",company:"LX"},{id:"a220-27",registration:"HB-JCR",type:"A220",company:"LX"},{id:"a220-28",registration:"HB-JCS",type:"A220",company:"LX"},{id:"a220-29",registration:"HB-JCT",type:"A220",company:"LX"},{id:"a220-30",registration:"HB-JCU",type:"A220",company:"LX"},{id:"a320neo-1",registration:"HB-JDA",type:"A320 NEO",company:"LX"},{id:"a320neo-2",registration:"HB-JDB",type:"A320 NEO",company:"LX"},{id:"a320neo-3",registration:"HB-JDC",type:"A320 NEO",company:"LX"},{id:"a320neo-4",registration:"HB-JDD",type:"A320 NEO",company:"LX"},{id:"a320neo-5",registration:"HB-JDE",type:"A320 NEO",company:"LX"},{id:"a320neo-6",registration:"HB-JDF",type:"A320 NEO",company:"LX"},{id:"a320neo-7",registration:"HB-JDG",type:"A320 NEO",company:"LX"},{id:"a320neo-8",registration:"HB-JDH",type:"A320 NEO",company:"LX"},{id:"a320neo-9",registration:"HB-JDI",type:"A320 NEO",company:"LX"},{id:"a320neo-10",registration:"HB-JDJ",type:"A320 NEO",company:"LX"},{id:"a320neo-11",registration:"HB-JDK",type:"A320 NEO",company:"LX"},{id:"a320neo-12",registration:"HB-JDL",type:"A320 NEO",company:"LX"},{id:"a320neo-13",registration:"HB-JDM",type:"A320 NEO",company:"LX"},{id:"a330rr-1",registration:"HB-JHA",type:"A330 RR",company:"LX"},{id:"a330rr-2",registration:"HB-JHB",type:"A330 RR",company:"LX"},{id:"a330rr-3",registration:"HB-JHC",type:"A330 RR",company:"LX"},{id:"a330rr-4",registration:"HB-JHD",type:"A330 RR",company:"LX"},{id:"a330rr-5",registration:"HB-JHE",type:"A330 RR",company:"LX"},{id:"a330rr-6",registration:"HB-JHF",type:"A330 RR",company:"LX"},{id:"a330rr-7",registration:"HB-JHG",type:"A330 RR",company:"LX"},{id:"a330rr-8",registration:"HB-JHH",type:"A330 RR",company:"LX"},{id:"a330rr-9",registration:"HB-JHI",type:"A330 RR",company:"LX"},{id:"a330rr-10",registration:"HB-JHJ",type:"A330 RR",company:"LX"},{id:"a330rr-11",registration:"HB-JHK",type:"A330 RR",company:"LX"},{id:"a330rr-12",registration:"HB-JHL",type:"A330 RR",company:"LX"},{id:"a330rr-13",registration:"HB-JHM",type:"A330 RR",company:"LX"},{id:"a330rr-14",registration:"HB-JHN",type:"A330 RR",company:"LX"},{id:"a343-1",registration:"HB-JMA",type:"A343",company:"LX"},{id:"a343-2",registration:"HB-JMB",type:"A343",company:"LX"},{id:"a343-3",registration:"HB-JMC",type:"A343",company:"WK"},{id:"a343-4",registration:"HB-JMD",type:"A343",company:"WK"},{id:"a343-5",registration:"HB-JME",type:"A343",company:"WK"},{id:"a343-6",registration:"HB-JMF",type:"A343",company:"WK"},{id:"a343-7",registration:"HB-JMG",type:"A343",company:"WK"},{id:"a343-8",registration:"HB-JMH",type:"A343",company:"LX"},{id:"a343-9",registration:"HB-JMI",type:"A343",company:"LX"},{id:"b777-1",registration:"HB-JNA",type:"B777",company:"LX"},{id:"b777-2",registration:"HB-JNB",type:"B777",company:"LX"},{id:"b777-3",registration:"HB-JNC",type:"B777",company:"LX"},{id:"b777-4",registration:"HB-JND",type:"B777",company:"LX"},{id:"b777-5",registration:"HB-JNE",type:"B777",company:"LX"},{id:"b777-6",registration:"HB-JNF",type:"B777",company:"LX"},{id:"b777-7",registration:"HB-JNG",type:"B777",company:"LX"},{id:"b777-8",registration:"HB-JNH",type:"B777",company:"LX"},{id:"b777-9",registration:"HB-JNI",type:"B777",company:"LX"},{id:"b777-10",registration:"HB-JNJ",type:"B777",company:"LX"},{id:"b777-11",registration:"HB-JNK",type:"B777",company:"LX"},{id:"b777-12",registration:"HB-JNL",type:"B777",company:"LX"}],Me=(n,o)=>{try{const u=localStorage.getItem(n);return u?JSON.parse(u):o}catch{return o}},Fs=n=>n.map(o=>({...o,type:o.type==="777"?"B777":o.type}));function Qs(){const{toast:n}=Ds(),{employees:o,assignments:u,selectedDate:N,getAssignment:B}=ns(),$=p.useMemo(()=>o.filter(t=>t.role!=="PM"&&t.role!=="PS"),[o]),[w,I]=p.useState(N),[A,le]=p.useState(()=>{const t=Me("aerostaff_aircraft",[]);return t.length<100?(localStorage.removeItem("aerostaff_aircraft"),Ps):Fs(t)}),[H,O]=p.useState(()=>Me("aerostaff_duty",[])),[P,E]=p.useState(()=>Me("aerostaff_requirements",[])),[oe,F]=p.useState(()=>Me("aerostaff_assignments",[])),[ke,pe]=p.useState("assignments"),[Ie,fe]=p.useState(""),[Oe,ot]=p.useState(!1),[xe,dt]=p.useState(""),[be,ct]=p.useState(""),[ve,Dt]=p.useState("B1"),[$t,mt]=p.useState(!1),[Le,ut]=p.useState(""),[pt,Ot]=p.useState("A320 CF"),[ft,Pt]=p.useState("LX"),[de,Je]=p.useState(null),g=ue(w,"yyyy-MM-dd");p.useEffect(()=>{localStorage.setItem("aerostaff_aircraft",JSON.stringify(A))},[A]),p.useEffect(()=>{localStorage.setItem("aerostaff_duty",JSON.stringify(H))},[H]),p.useEffect(()=>{localStorage.setItem("aerostaff_requirements",JSON.stringify(P))},[P]),p.useEffect(()=>{localStorage.setItem("aerostaff_assignments",JSON.stringify(oe))},[oe]);const Be=p.useMemo(()=>u.filter(t=>t.date===g).map(t=>({employeeId:t.employeeId,onDuty:ls(t.shiftCode),shiftCode:t.shiftCode})),[u,g]);p.useEffect(()=>{if(H.filter(s=>s.date===g).length===0){const s=o.map(i=>{const r=Be.find(d=>d.employeeId===i.id);return{date:g,employeeId:i.id,onDuty:r?.onDuty??!0}});O(i=>[...i,...s])}},[g,o,Be]);const Pe=p.useMemo(()=>H.filter(t=>t.date===g),[H,g]),ee=p.useMemo(()=>P.filter(t=>t.date===g),[P,g]),X=p.useMemo(()=>oe.filter(t=>t.date===g),[oe,g]);p.useMemo(()=>{const t={};return X.forEach(s=>{const i=A.find(r=>r.id===s.aircraftId);i&&(t[s.employeeId]=i.registration)}),t},[X,A]);const M=p.useMemo(()=>$.filter(t=>{const s=Be.find(r=>r.employeeId===t.id);return s?s.onDuty:Pe.find(r=>r.employeeId===t.id)?.onDuty??!0}),[$,Pe,Be]),Ft=t=>{O(s=>s.map(i=>i.date===g&&i.employeeId===t?{...i,onDuty:!i.onDuty}:i))},xt=()=>{const t=Ie.trim().toUpperCase();if(!t)return;let s=A.find(r=>r.registration.toUpperCase()===t);if(s||(s=A.find(r=>r.registration.toUpperCase().includes(t))),!s){n({title:"Aircraft Not Found",description:`Registration "${t}" not found in fleet. Add it first.`,variant:"destructive"});return}if(P.find(r=>r.date===g&&r.aircraftId===s.id)){n({title:"Already Added",description:`${t} is already in today's work requirements.`,variant:"destructive"});return}const i={id:`wr-${s.id}-${g}-${Date.now()}`,date:g,aircraftId:s.id,b1Required:1,b2Required:1,catARequired:0,b1Hours:8,b2Hours:8,catAHours:8,b1TotalHours:8,b2TotalHours:8,catATotalHours:0,priority:"normal",specialSkillsRequired:[],boroscopeRequired:!1,engineRunRequired:!1};E(r=>[...r,i]),fe(""),n({title:"Aircraft Added",description:`${s.registration} (${s.type}) added to work requirements.`})},_t=t=>{const s=P.find(i=>i.id===t);E(i=>i.filter(r=>r.id!==t)),s&&F(i=>i.filter(r=>!(r.aircraftId===s.aircraftId&&r.date===g)))},Fe=(t,s,i)=>{E(r=>r.map(d=>{if(d.date!==g||d.aircraftId!==t)return d;const h=Math.max(0,isNaN(i)?0:i),x={...d,[s]:h};return s==="b1TotalHours"?x.b1Required=nt(h):s==="b2TotalHours"?x.b2Required=nt(h):s==="catATotalHours"&&(x.catARequired=nt(h)),x}))},Wt=(t,s)=>{E(i=>i.map(r=>r.id===t?{...r,priority:s}:r))},Kt=(t,s)=>{E(i=>i.map(r=>{if(r.id!==t)return r;const d=r.specialSkillsRequired||[],h=d.includes(s);return{...r,specialSkillsRequired:h?d.filter(x=>x!==s):[...d,s]}}))},qt=t=>{E(s=>s.map(i=>i.id===t?{...i,boroscopeRequired:!i.boroscopeRequired}:i))},zt=t=>{E(s=>s.map(i=>i.id===t?{...i,engineRunRequired:!i.engineRunRequired}:i))},Y=(t,s,i)=>{if(t.role==="PM"||t.role==="PS")return!1;if(i==="Cat A/Helper")return!0;const r=t.skills.find(d=>Bt(d.aircraftType,s.type));return!(!r||!r.license||i==="B1"&&r.license!=="B1"&&r.license!=="B1/2"||i==="B2"&&r.license!=="B2"&&r.license!=="B1/2")},K=(t,s)=>t.certifications.some(i=>i.toLowerCase().includes(s.toLowerCase())),ce=(t,s)=>s.filter(i=>K(t,i)).length,Ae=t=>{const s=[...t];for(let i=s.length-1;i>0;i--){const r=Math.floor(Math.random()*(i+1));[s[i],s[r]]=[s[r],s[i]]}return s},me=t=>t.grade||0,Ee=(t,s)=>t.skills.find(r=>Bt(r.aircraftType,s))?.license==="B1/2",ht=t=>t.role==="SrEng",Ce=t=>t.skills.length>0&&t.skills.every(s=>s.license==="A"),Ut=()=>{F(t=>t.filter(s=>s.date!==g)),n({title:"Assignments Cleared",description:`All assignments for ${ue(w,"MMM d, yyyy")} have been cleared.`})},gt=()=>{const t=[],s={},i={},r=[...ee].sort((m,a)=>ne[m.priority||"normal"].order-ne[a.priority||"normal"].order),d=m=>t.some(a=>a.employeeId===m),h=M.filter(m=>ht(m)),x=M.filter(m=>!ht(m)&&!Ce(m));M.filter(m=>Ce(m));for(const m of r){const a=A.find(c=>c.id===m.aircraftId);if(!a)continue;const l=X.filter(c=>c.aircraftId===m.aircraftId&&c.isManualOverride);l.forEach(c=>{s[c.employeeId]=(s[c.employeeId]||0)+1,t.push(c)});const D=l.filter(c=>c.role==="B1").length,b=l.filter(c=>c.role==="B2").length;let ge=Math.max(0,m.b1Required-D),R=Math.max(0,m.b2Required-b);const C=m.specialSkillsRequired||[],_=Ae(h.filter(c=>{if(!Y(c,a,"B1"))return!1;const f=i[c.id];return f?!(f.count>=2||f.count===1&&!f.types.includes(a.type)):!0})).sort((c,f)=>{const q=ce(c,C),z=ce(f,C);if(q!==z)return z-q;const U=me(c),te=me(f);return U!==te?te-U:(i[c.id]?.count||0)-(i[f.id]?.count||0)});for(let c=0;c<ge&&c<_.length;c++){const f=_[c];t.push({id:`assign-${f.id}-${a.id}-${g}-B1`,date:g,aircraftId:a.id,employeeId:f.id,role:"B1",isManualOverride:!1}),s[f.id]=(s[f.id]||0)+1,i[f.id]||(i[f.id]={count:0,types:[]}),i[f.id].count++,i[f.id].types.includes(a.type)||i[f.id].types.push(a.type),ge--}const y=Ae(h.filter(c=>{if(!Y(c,a,"B2"))return!1;const f=i[c.id];return f?!(f.count>=2||f.count===1&&!f.types.includes(a.type)):!0})).sort((c,f)=>{const q=ce(c,C),z=ce(f,C);if(q!==z)return z-q;const U=me(c),te=me(f);return U!==te?te-U:(i[c.id]?.count||0)-(i[f.id]?.count||0)});for(let c=0;c<R&&c<y.length;c++){const f=y[c];t.push({id:`assign-${f.id}-${a.id}-${g}-B2`,date:g,aircraftId:a.id,employeeId:f.id,role:"B2",isManualOverride:!1}),s[f.id]=(s[f.id]||0)+1,i[f.id]||(i[f.id]={count:0,types:[]}),i[f.id].count++,i[f.id].types.includes(a.type)||i[f.id].types.push(a.type),R--}}for(const m of r){const a=A.find(y=>y.id===m.aircraftId);if(!a)continue;const l=m.specialSkillsRequired||[],D=t.filter(y=>y.aircraftId===a.id&&y.role==="B1").length,b=t.filter(y=>y.aircraftId===a.id&&y.role==="B2").length;let ge=Math.max(0,m.b1Required-D),R=Math.max(0,m.b2Required-b);const C=Ae(x.filter(y=>!d(y.id)&&Y(y,a,"B1")&&!Ce(y))).sort((y,c)=>{const f=Ee(y,a.type)?1:0,q=Ee(c,a.type)?1:0;if(f!==q)return q-f;const z=me(y),U=me(c);if(z!==U)return U-z;const te=ce(y,l);return ce(c,l)-te});for(let y=0;y<ge&&y<C.length;y++){const c=C[y];t.push({id:`assign-${c.id}-${a.id}-${g}-B1`,date:g,aircraftId:a.id,employeeId:c.id,role:"B1",isManualOverride:!1}),s[c.id]=(s[c.id]||0)+1}const _=Ae(x.filter(y=>!d(y.id)&&Y(y,a,"B2")&&!Ce(y))).sort((y,c)=>{const f=Ee(y,a.type)?1:0,q=Ee(c,a.type)?1:0;if(f!==q)return q-f;const z=me(y),U=me(c);if(z!==U)return U-z;const te=ce(y,l);return ce(c,l)-te});for(let y=0;y<R&&y<_.length;y++){const c=_[y];t.push({id:`assign-${c.id}-${a.id}-${g}-B2`,date:g,aircraftId:a.id,employeeId:c.id,role:"B2",isManualOverride:!1}),s[c.id]=(s[c.id]||0)+1}}for(const m of r){const a=A.find(R=>R.id===m.aircraftId);if(!a)continue;const l=m.catARequired||0;if(l<=0)continue;const D=t.filter(R=>R.aircraftId===a.id&&R.role==="Cat A/Helper").length;let b=Math.max(0,l-D);const ge=Ae(M.filter(R=>Ce(R)&&!t.some(C=>C.employeeId===R.id)));for(let R=0;R<b&&R<ge.length;R++){const C=ge[R];t.push({id:`assign-${C.id}-${a.id}-${g}-CatA`,date:g,aircraftId:a.id,employeeId:C.id,role:"Cat A/Helper",isManualOverride:!1}),s[C.id]=(s[C.id]||0)+1,b--}if(b>0){const R=Ae(M.filter(C=>!t.some(_=>_.employeeId===C.id)));for(let C=0;C<b&&C<R.length;C++){const _=R[C];t.push({id:`assign-${_.id}-${a.id}-${g}-CatA`,date:g,aircraftId:a.id,employeeId:_.id,role:"Cat A/Helper",isManualOverride:!1}),s[_.id]=(s[_.id]||0)+1}}}const Z=r.reduce((m,a)=>m+a.b1Required+a.b2Required+(a.catARequired||0),0)-t.length;F(m=>[...m.filter(a=>a.date!==g),...t]),Z>0?n({title:"Auto-Assignment Complete",description:`Assigned ${t.length} positions. ${Z} positions unfilled (not enough staff).`,variant:"destructive"}):n({title:"Auto-Assignment Complete",description:`Assigned ${t.length} positions to aircraft.`})},_e=(t,s,i)=>{if(X.find(x=>x.aircraftId===t&&x.employeeId===s&&x.role===i)){n({title:"Already Assigned",description:"This employee is already assigned to this aircraft.",variant:"destructive"});return}const r={id:`assign-${s}-${t}-${g}-${i}-manual`,date:g,aircraftId:t,employeeId:s,role:i,isManualOverride:!0};F(x=>[...x,r]);const d=o.find(x=>x.id===s),h=A.find(x=>x.id===t);n({title:"Assignment Added",description:`${d?.name} assigned to ${h?.registration} as ${i}`})},We=t=>{F(s=>s.filter(i=>i.id!==t))},Gt=()=>{if(!Le.trim()){n({title:"Enter Registration",description:"Please enter an aircraft registration.",variant:"destructive"});return}if(A.find(s=>s.registration.toUpperCase()===Le.trim().toUpperCase())){n({title:"Already Exists",description:"This registration already exists.",variant:"destructive"});return}const t={id:`ac-${Date.now()}`,registration:Le.trim().toUpperCase(),type:pt,company:ft};le(s=>[...s,t]),mt(!1),ut(""),n({title:"Aircraft Added",description:`${t.registration} (${t.type}) added to fleet.`})},Vt=()=>{de&&(le(t=>t.filter(s=>s.id!==de.id)),E(t=>t.filter(s=>s.aircraftId!==de.id)),F(t=>t.filter(s=>s.aircraftId!==de.id)),n({title:"Aircraft Removed",description:`${de.registration} removed from fleet.`}),Je(null))},T=(()=>{let t=0,s=0,i=0,r=0;return ee.forEach(d=>{const h=d.b1Required+d.b2Required+(d.catARequired||0),x=X.filter(a=>a.aircraftId===d.aircraftId).length;t+=h,s+=x,x<h&&(i+=h-x);const he=X.filter(a=>a.aircraftId===d.aircraftId&&a.role==="B1").length,Z=X.filter(a=>a.aircraftId===d.aircraftId&&a.role==="B2").length,m=X.filter(a=>a.aircraftId===d.aircraftId&&a.role==="Cat A/Helper").length;r+=he*(d.b1Hours||8)+Z*(d.b2Hours||8)+m*(d.catAHours||8)}),{totalRequired:t,totalAssigned:s,unfilled:i,onDuty:M.length,totalHours:r}})(),Qt=()=>{const t=`
      <!DOCTYPE html><html><head><title>Daily Assignments - ${ue(w,"MMMM d, yyyy")}</title>
      <style>body{font-family:Arial,sans-serif;padding:20px}h1{font-size:24px}h2{font-size:14px;color:#666}.aircraft{border:1px solid #ddd;margin-bottom:15px;padding:15px;border-radius:8px}.aircraft-header{font-size:18px;font-weight:bold}.role-section{margin:10px 0}.role-title{font-weight:bold;font-size:12px;color:#444}.employee{padding:4px 8px;background:#f5f5f5;margin:3px 0;border-radius:4px;font-size:13px}.skills{font-size:11px;color:#666;margin-top:5px}.hours{font-size:10px;color:#888}</style></head>
      <body><h1>AeroStaff - Daily Assignments</h1><h2>${ue(w,"EEEE, MMMM d, yyyy")}</h2>
      ${ee.map(i=>{const r=A.find(m=>m.id===i.aircraftId);if(!r)return"";const d=X.filter(m=>m.aircraftId===i.aircraftId),h=d.filter(m=>m.role==="B1"),x=d.filter(m=>m.role==="B2"),he=d.filter(m=>m.role==="Cat A/Helper"),Z=(i.specialSkillsRequired||[]).map(m=>Q[m].label).join(", ");return`<div class="aircraft"><div class="aircraft-header">${r.registration} (${r.type}) - ${ne[i.priority].label}</div>
          ${Z?`<div class="skills">Required: ${Z}</div>`:""}
          <div class="role-section"><div class="role-title">B1 (${h.length}/${i.b1Required}) <span class="hours">${i.b1Hours||8}h each</span></div>${h.map(m=>{const a=o.find(l=>l.id===m.employeeId);return`<div class="employee">${a?.name} (${a?.initials})</div>`}).join("")}</div>
          <div class="role-section"><div class="role-title">B2 (${x.length}/${i.b2Required}) <span class="hours">${i.b2Hours||8}h each</span></div>${x.map(m=>{const a=o.find(l=>l.id===m.employeeId);return`<div class="employee">${a?.name} (${a?.initials})</div>`}).join("")}</div>
          ${(i.catARequired||0)>0?`<div class="role-section"><div class="role-title">Cat A/Helper (${he.length}/${i.catARequired||0}) <span class="hours">${i.catAHours||8}h each</span></div>${he.map(m=>{const a=o.find(l=>l.id===m.employeeId);return`<div class="employee">${a?.name} (${a?.initials})</div>`}).join("")}</div>`:""}</div>`}).join("")}
      <div style="margin-top:20px;padding:15px;background:#f0f0f0;border-radius:8px"><strong>Summary:</strong> ${T.totalAssigned}/${T.totalRequired} positions filled | ${T.totalHours.toFixed(1)}h total | ${T.onDuty} employees on duty</div></body></html>`,s=window.open("","_blank");s&&(s.document.write(t),s.document.close(),s.print())},Yt=()=>X.map(t=>({assignment:t,emp:o.find(s=>s.id===t.employeeId),ac:A.find(s=>s.id===t.aircraftId)})).filter(t=>t.emp&&t.ac),Zt=t=>ee.filter(s=>{const i=X.filter(r=>r.aircraftId===s.aircraftId);return t==="B1"?i.filter(r=>r.role==="B1").length<s.b1Required:t==="B2"?i.filter(r=>r.role==="B2").length<s.b2Required:i.filter(r=>r.role==="Cat A/Helper").length<(s.catARequired||0)}),es=()=>{if(!xe||!be)return;const t=X.find(d=>d.employeeId===xe);t&&F(d=>d.filter(h=>h.id!==t.id));const s={id:`assign-${xe}-${be}-${g}-${ve}-quick`,date:g,aircraftId:be,employeeId:xe,role:ve,isManualOverride:!0};F(d=>[...d,s]),ot(!1),dt(""),ct("");const i=o.find(d=>d.id===xe),r=A.find(d=>d.id===be);n({title:"Quick Reassignment Complete",description:`${i?.name} moved to ${r?.registration} as ${ve}`})},yt=t=>{const s=o.map(i=>({date:g,employeeId:i.id,onDuty:t}));O(i=>[...i.filter(r=>r.date!==g),...s])};return e.jsxs("div",{className:"p-6 lg:p-8 space-y-6","data-testid":"aerostaff-page",children:[e.jsxs("header",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 pb-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-sky-500 to-blue-600 flex items-center justify-center shadow-lg",children:e.jsx(Ke,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-display font-bold tracking-tight","data-testid":"text-app-title",children:"AeroStaff v4.0"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(js,{className:"w-3 h-3"})," Local Storage",e.jsx("span",{children:"•"}),"Aircraft Maintenance Staffing"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-muted px-4 py-2 rounded-lg",children:[e.jsx(v,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>I(Ns(w)),"data-testid":"button-prev-day",children:e.jsx(os,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jt,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"font-mono text-sm font-medium","data-testid":"text-selected-date",children:ue(w,"EEE, MMM d, yyyy")})]}),e.jsx(v,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>I(wt(w,1)),"data-testid":"button-next-day",children:e.jsx(ds,{className:"h-4 w-4"})})]}),e.jsxs(v,{variant:"outline",onClick:Ut,className:"text-destructive border-destructive/50 hover:bg-destructive/10","data-testid":"button-clear-all",children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"})," Clear All"]}),e.jsxs(v,{onClick:gt,className:"bg-primary","data-testid":"button-auto-assign",children:[e.jsx(As,{className:"h-4 w-4 mr-2"})," Auto-Assign"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(G,{className:"bg-gradient-to-br from-sky-50 to-blue-50 dark:from-sky-950/30 dark:to-blue-950/30 border-sky-200","data-testid":"card-stat-on-duty",children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-sky-600",children:"On Duty"}),e.jsx("p",{className:"text-3xl font-display font-bold text-sky-700",children:T.onDuty})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-sky-500/20 flex items-center justify-center",children:e.jsx(bt,{className:"w-6 h-6 text-sky-500"})})]})})}),e.jsx(G,{className:"bg-gradient-to-br from-violet-50 to-purple-50 dark:from-violet-950/30 dark:to-purple-950/30 border-violet-200","data-testid":"card-stat-required",children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-violet-600",children:"Positions Required"}),e.jsx("p",{className:"text-3xl font-display font-bold text-violet-700",children:T.totalRequired})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-violet-500/20 flex items-center justify-center",children:e.jsx(Ht,{className:"w-6 h-6 text-violet-500"})})]})})}),e.jsx(G,{className:"bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-950/30 dark:to-green-950/30 border-emerald-200","data-testid":"card-stat-assigned",children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-600",children:"Assigned"}),e.jsx("p",{className:"text-3xl font-display font-bold text-emerald-700",children:T.totalAssigned})]}),e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500/20 flex items-center justify-center",children:e.jsx(Ct,{className:"w-6 h-6 text-emerald-500"})})]})})}),e.jsx(G,{className:J("border",T.unfilled>0?"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-950/30 dark:to-rose-950/30 border-red-200":"bg-gradient-to-br from-slate-50 to-gray-50 dark:from-slate-950/30 dark:to-gray-950/30 border-slate-200"),"data-testid":"card-stat-unfilled",children:e.jsx(V,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:J("text-sm",T.unfilled>0?"text-red-600":"text-slate-600"),children:"Unfilled"}),e.jsx("p",{className:J("text-3xl font-display font-bold",T.unfilled>0?"text-red-700":"text-slate-700"),children:T.unfilled})]}),e.jsx("div",{className:J("w-12 h-12 rounded-full flex items-center justify-center",T.unfilled>0?"bg-red-500/20":"bg-slate-500/20"),children:e.jsx(At,{className:J("w-6 h-6",T.unfilled>0?"text-red-500":"text-slate-500")})})]})})})]}),T.unfilled>0&&e.jsxs(G,{className:"border-red-500/50 bg-red-50 dark:bg-red-950/20","data-testid":"card-unfilled-details",children:[e.jsx(ye,{className:"pb-2",children:e.jsxs(je,{className:"text-sm font-medium text-red-600 flex items-center gap-2",children:[e.jsx(At,{className:"h-4 w-4"})," Unfilled Positions - Action Required"]})}),e.jsx(V,{children:e.jsx("div",{className:"space-y-2",children:ee.map(t=>{const s=A.find(h=>h.id===t.aircraftId);if(!s)return null;const i=X.filter(h=>h.aircraftId===t.aircraftId),r=Math.max(0,t.b1Required-i.filter(h=>h.role==="B1").length),d=Math.max(0,t.b2Required-i.filter(h=>h.role==="B2").length);return r===0&&d===0?null:e.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-white/50 dark:bg-black/20 border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:`text-xs text-white ${ne[t.priority].color}`,children:ne[t.priority].label}),e.jsx("span",{className:"font-mono font-medium",children:s.registration}),e.jsxs("span",{className:"text-muted-foreground text-sm",children:["(",s.type,")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[r>0&&e.jsxs(j,{variant:"destructive",className:"text-xs",children:["B1: ",r," missing"]}),d>0&&e.jsxs(j,{variant:"destructive",className:"text-xs",children:["B2: ",d," missing"]})]})]},t.id)})})})]}),e.jsxs(ms,{value:ke,onValueChange:pe,className:"space-y-4",children:[e.jsxs(us,{className:"grid grid-cols-5 w-full max-w-2xl",children:[e.jsxs(Re,{value:"assignments","data-testid":"tab-assignments",children:[e.jsx(Ht,{className:"h-4 w-4 mr-2"}),"Assignments"]}),e.jsxs(Re,{value:"duty","data-testid":"tab-duty",children:[e.jsx(jt,{className:"h-4 w-4 mr-2"}),"Duty Status"]}),e.jsxs(Re,{value:"requirements","data-testid":"tab-requirements",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"Work Req."]}),e.jsxs(Re,{value:"employees","data-testid":"tab-employees",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Employees"]}),e.jsxs(Re,{value:"aircraft","data-testid":"tab-aircraft",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Aircraft"]})]}),e.jsx(we,{value:"assignments",className:"space-y-4",children:e.jsxs(G,{children:[e.jsxs(ye,{className:"flex flex-row items-center justify-between",children:[e.jsxs(je,{className:"font-display",children:["Daily Assignments - ",ue(w,"MMMM d, yyyy")]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ze,{open:Oe,onOpenChange:ot,children:[e.jsx(Nt,{asChild:!0,children:e.jsxs(v,{variant:"outline",size:"sm","data-testid":"button-quick-reassign",children:[e.jsx(gs,{className:"h-4 w-4 mr-2"}),"Quick Reassign"]})}),e.jsxs(Ue,{children:[e.jsx(Ge,{children:e.jsx(Ve,{children:"Quick Reassign"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Move an employee to another aircraft."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Employee to reassign"}),e.jsxs(se,{value:xe,onValueChange:dt,children:[e.jsx(ie,{children:e.jsx(ae,{placeholder:"Select employee"})}),e.jsx(re,{children:Yt().map(({assignment:t,emp:s,ac:i})=>e.jsxs(L,{value:s.id,children:[s?.name," (",s?.initials,") - ",i?.registration," [",t.role,"]"]},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"New role"}),e.jsxs(se,{value:ve,onValueChange:t=>Dt(t),children:[e.jsx(ie,{children:e.jsx(ae,{})}),e.jsxs(re,{children:[e.jsx(L,{value:"B1",children:"B1"}),e.jsx(L,{value:"B2",children:"B2"}),e.jsx(L,{value:"Cat A/Helper",children:"Cat A/Helper"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Move to aircraft"}),e.jsxs(se,{value:be,onValueChange:ct,children:[e.jsx(ie,{children:e.jsx(ae,{placeholder:"Select aircraft"})}),e.jsx(re,{children:Zt(ve).map(t=>{const s=A.find(i=>i.id===t.aircraftId);return e.jsxs(L,{value:t.aircraftId,children:[s?.registration," (",s?.type,")"]},t.id)})})]})]})]}),e.jsxs(Qe,{children:[e.jsx(vt,{asChild:!0,children:e.jsx(v,{variant:"outline",children:"Cancel"})}),e.jsx(v,{onClick:es,disabled:!xe||!be,children:"Reassign"})]})]})]}),e.jsxs(v,{variant:"outline",size:"sm",onClick:Qt,"data-testid":"button-print",children:[e.jsx(fs,{className:"h-4 w-4 mr-2"}),"Print / PDF"]}),e.jsxs(v,{variant:"outline",size:"sm",onClick:gt,children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),e.jsx(V,{children:ee.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(qe,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"font-medium",children:"No work requirements for this day."}),e.jsx("p",{className:"text-sm",children:"Add aircraft and requirements first."}),e.jsxs(v,{className:"mt-4",onClick:()=>pe("requirements"),children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Add Work Requirements"]})]}):e.jsx("div",{className:"space-y-6",children:[...ee].sort((t,s)=>ne[t.priority].order-ne[s.priority].order).map(t=>{const s=A.find(a=>a.id===t.aircraftId);if(!s)return null;const i=X.filter(a=>a.aircraftId===t.aircraftId),r=i.filter(a=>a.role==="B1"),d=i.filter(a=>a.role==="B2"),h=i.filter(a=>a.role==="Cat A/Helper"),x=t.specialSkillsRequired||[],he=i.map(a=>o.find(l=>l.id===a.employeeId)).filter(Boolean),Z=x.filter(a=>he.some(l=>l&&K(l,a))),m=x.filter(a=>!Z.includes(a));return e.jsxs("div",{className:J("p-4 rounded-lg border",t.priority==="urgent"?"border-red-500/50 bg-red-50/50 dark:bg-red-950/20":t.priority==="high"?"border-orange-500/50 bg-orange-50/50":"bg-muted/30"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:J("w-10 h-10 rounded-lg flex items-center justify-center",t.priority==="urgent"?"bg-red-500/20":t.priority==="high"?"bg-orange-500/20":"bg-primary/20"),children:e.jsx(Ke,{className:J("w-5 h-5",t.priority==="urgent"?"text-red-500":t.priority==="high"?"text-orange-500":"text-primary")})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-display font-semibold text-lg",children:s.registration}),e.jsx(j,{className:`text-xs text-white ${ne[t.priority].color}`,children:ne[t.priority].label})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.type," • ",s.company]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(j,{variant:r.length>=t.b1Required?"default":"destructive",className:"font-mono",children:["B1: ",r.length,"/",t.b1Required]}),e.jsxs(j,{variant:d.length>=t.b2Required?"default":"destructive",className:"font-mono",children:["B2: ",d.length,"/",t.b2Required]}),(t.catARequired||0)>0&&e.jsxs(j,{variant:h.length>=(t.catARequired||0)?"default":"destructive",className:"font-mono",children:["Cat A: ",h.length,"/",t.catARequired||0]}),t.boroscopeRequired&&e.jsx(j,{className:"bg-violet-500 text-white",children:"Boroscope"}),t.engineRunRequired&&e.jsx(j,{className:"bg-rose-500 text-white",children:"Engine Run"})]})]}),x.length>0&&e.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-muted/50 border",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Required Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(a=>{const l=Z.includes(a);return e.jsxs(j,{variant:l?"default":"destructive",className:J("text-xs",l&&Q[a].color),children:[l?e.jsx(Ct,{className:"w-3 h-3 mr-1"}):e.jsx(Xe,{className:"w-3 h-3 mr-1"}),Q[a].label]},a)})}),m.length>0&&e.jsxs("p",{className:"text-xs text-destructive mt-2",children:["Missing: ",m.map(a=>Q[a].label).join(", ")]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-medium text-sm text-blue-600",children:"B1 Mechanics"}),r.map(a=>{const l=o.find(b=>b.id===a.employeeId),D=l?x.filter(b=>K(l,b)):[];return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-950/30 rounded border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(j,{className:"bg-blue-500",children:"B1"}),e.jsx("span",{className:"font-mono text-sm",children:l?.initials}),e.jsx("span",{className:"text-sm",children:l?.name}),D.length>0&&D.map(b=>e.jsx(j,{variant:"outline",className:"text-xs",children:Q[b].label},b))]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>We(a.id),children:e.jsx(Xe,{className:"w-4 h-4"})})]},a.id)}),r.length<t.b1Required&&e.jsxs(se,{onValueChange:a=>_e(s.id,a,"B1"),children:[e.jsx(ie,{className:"border-dashed",children:e.jsx(ae,{placeholder:"+ Add B1 Engineer"})}),e.jsx(re,{children:M.filter(a=>Y(a,s,"B1")&&!r.some(l=>l.employeeId===a.id)).map(a=>e.jsxs(L,{value:a.id,children:[a.name," (",a.initials,") ",x.filter(l=>K(a,l)).length>0?`[${x.filter(l=>K(a,l)).map(l=>Q[l].label).join(", ")}]`:""]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-medium text-sm text-emerald-600",children:"B2 Avionics"}),d.map(a=>{const l=o.find(b=>b.id===a.employeeId),D=l?x.filter(b=>K(l,b)):[];return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-emerald-50 dark:bg-emerald-950/30 rounded border border-emerald-200",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(j,{className:"bg-emerald-500",children:"B2"}),e.jsx("span",{className:"font-mono text-sm",children:l?.initials}),e.jsx("span",{className:"text-sm",children:l?.name}),D.length>0&&D.map(b=>e.jsx(j,{variant:"outline",className:"text-xs",children:Q[b].label},b))]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>We(a.id),children:e.jsx(Xe,{className:"w-4 h-4"})})]},a.id)}),d.length<t.b2Required&&e.jsxs(se,{onValueChange:a=>_e(s.id,a,"B2"),children:[e.jsx(ie,{className:"border-dashed",children:e.jsx(ae,{placeholder:"+ Add B2 Engineer"})}),e.jsx(re,{children:M.filter(a=>Y(a,s,"B2")&&!d.some(l=>l.employeeId===a.id)).map(a=>e.jsxs(L,{value:a.id,children:[a.name," (",a.initials,") ",x.filter(l=>K(a,l)).length>0?`[${x.filter(l=>K(a,l)).map(l=>Q[l].label).join(", ")}]`:""]},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-medium text-sm text-amber-600",children:"Cat A / Helpers"}),h.map(a=>{const l=o.find(b=>b.id===a.employeeId),D=l?x.filter(b=>K(l,b)):[];return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-amber-50 dark:bg-amber-950/30 rounded border border-amber-200",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(j,{className:"bg-amber-500",children:"Cat A"}),e.jsx("span",{className:"font-mono text-sm",children:l?.initials}),e.jsx("span",{className:"text-sm",children:l?.name}),D.length>0&&D.map(b=>e.jsx(j,{variant:"outline",className:"text-xs",children:Q[b].label},b))]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>We(a.id),children:e.jsx(Xe,{className:"w-4 h-4"})})]},a.id)}),h.length<(t.catARequired||0)&&e.jsxs(se,{onValueChange:a=>_e(s.id,a,"Cat A/Helper"),children:[e.jsx(ie,{className:"border-dashed",children:e.jsx(ae,{placeholder:"+ Add Cat A/Helper"})}),e.jsx(re,{children:M.filter(a=>!h.some(l=>l.employeeId===a.id)).map(a=>e.jsxs(L,{value:a.id,children:[a.name," (",a.initials,") ",x.filter(l=>K(a,l)).length>0?`[${x.filter(l=>K(a,l)).map(l=>Q[l].label).join(", ")}]`:""]},a.id))})]}),(t.catARequired||0)===0&&e.jsx("div",{className:"text-xs text-muted-foreground italic p-2",children:"No Cat A/Helpers required. Add in Work Requirements tab."})]})]})]},t.id)})})})]})}),e.jsx(we,{value:"duty",className:"space-y-4",children:e.jsxs(G,{children:[e.jsxs(ye,{className:"flex flex-row items-center justify-between",children:[e.jsxs(je,{children:["Duty Status - ",ue(w,"MMMM d, yyyy")]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{variant:"outline",size:"sm",onClick:()=>yt(!0),children:"All On Duty"}),e.jsx(v,{variant:"outline",size:"sm",onClick:()=>yt(!1),children:"All Off Duty"})]})]}),e.jsxs(V,{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Note: PM and PS roles are excluded from auto-assignment."}),e.jsxs(tt,{children:[e.jsx(st,{children:e.jsxs(Ne,{children:[e.jsx(S,{children:"Employee"}),e.jsx(S,{children:"Initials"}),e.jsx(S,{children:"Role"}),e.jsx(S,{children:"Department"}),e.jsx(S,{children:"Shift"}),e.jsx(S,{className:"text-right",children:"On Duty"})]})}),e.jsx(it,{children:o.map(t=>{const s=Be.find(h=>h.employeeId===t.id),i=Pe.find(h=>h.employeeId===t.id),r=s?.onDuty??i?.onDuty??!0,d=t.role==="PM"||t.role==="PS";return e.jsxs(Ne,{className:J(!r&&"opacity-50",d&&"bg-muted/30"),children:[e.jsx(k,{className:"font-medium",children:t.name}),e.jsx(k,{className:"font-mono",children:t.initials}),e.jsx(k,{children:e.jsxs(j,{variant:d?"secondary":"outline",children:[t.role,d&&" (excluded)"]})}),e.jsx(k,{className:"text-muted-foreground text-sm",children:t.department}),e.jsx(k,{children:s?e.jsx(j,{variant:"secondary",className:"text-xs",children:s.shiftCode}):"-"}),e.jsx(k,{className:"text-right",children:e.jsx(Tt,{checked:r,onCheckedChange:()=>Ft(t.id),disabled:d})})]},t.id)})})]})]})]})}),e.jsxs(we,{value:"requirements",className:"space-y-4",children:[e.jsxs(G,{children:[e.jsx(ye,{children:e.jsx(je,{children:"Add Aircraft to Work Requirements"})}),e.jsx(V,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(He,{placeholder:"Enter aircraft registration (e.g., HB-JCC)",value:Ie,onChange:t=>fe(t.target.value),onKeyDown:t=>t.key==="Enter"&&xt(),className:"max-w-xs"}),e.jsxs(v,{onClick:xt,children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Add Aircraft"]})]})})]}),e.jsxs(G,{children:[e.jsx(ye,{children:e.jsxs(je,{children:["Work Requirements - ",ue(w,"MMMM d, yyyy")]})}),e.jsx(V,{children:ee.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed rounded-lg",children:[e.jsx(qe,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No work requirements added yet"})]}):e.jsx("div",{className:"space-y-4",children:ee.map(t=>{const s=A.find(i=>i.id===t.aircraftId);return e.jsxs("div",{className:J("p-4 border rounded-lg",t.priority==="urgent"&&"border-red-500/50 bg-red-50/30",t.priority==="high"&&"border-orange-500/50 bg-orange-50/30"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-mono font-bold text-lg",children:s?.registration}),e.jsx(j,{variant:"outline",children:s?.type})]}),e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>_t(t.id),children:e.jsx(Ye,{className:"w-4 h-4 text-destructive"})})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(W,{className:"text-xs",children:"Priority"}),e.jsxs(se,{value:t.priority,onValueChange:i=>Wt(t.id,i),children:[e.jsx(ie,{children:e.jsx(ae,{})}),e.jsxs(re,{children:[e.jsx(L,{value:"urgent",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),"Urgent"]})}),e.jsx(L,{value:"high",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),"High"]})}),e.jsx(L,{value:"normal",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Normal"]})}),e.jsx(L,{value:"low",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-gray-500"}),"Low"]})})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-xs text-blue-600",children:"B1 Hours"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(He,{type:"number",min:"0",step:"1",value:t.b1TotalHours??t.b1Required*8,onChange:i=>Fe(t.aircraftId,"b1TotalHours",parseFloat(i.target.value)||0),className:"w-full",placeholder:"Total hours"}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center justify-between",children:[e.jsxs("span",{children:["= ",t.b1Required," person",t.b1Required!==1?"s":""]}),e.jsxs("span",{className:"text-blue-600 font-medium",children:[t.b1TotalHours??t.b1Required*8,"h"]})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-xs text-emerald-600",children:"B2 Hours"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(He,{type:"number",min:"0",step:"1",value:t.b2TotalHours??t.b2Required*8,onChange:i=>Fe(t.aircraftId,"b2TotalHours",parseFloat(i.target.value)||0),className:"w-full",placeholder:"Total hours"}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center justify-between",children:[e.jsxs("span",{children:["= ",t.b2Required," person",t.b2Required!==1?"s":""]}),e.jsxs("span",{className:"text-emerald-600 font-medium",children:[t.b2TotalHours??t.b2Required*8,"h"]})]})]})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-xs text-amber-600",children:"Cat A Hours"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(He,{type:"number",min:"0",step:"1",value:t.catATotalHours??(t.catARequired||0)*8,onChange:i=>Fe(t.aircraftId,"catATotalHours",parseFloat(i.target.value)||0),className:"w-full",placeholder:"Total hours"}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center justify-between",children:[e.jsxs("span",{children:["= ",t.catARequired||0," person",(t.catARequired||0)!==1?"s":""]}),e.jsxs("span",{className:"text-amber-600 font-medium",children:[t.catATotalHours??(t.catARequired||0)*8,"h"]})]})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(W,{className:"text-xs",children:"Qualified Available"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsxs(j,{variant:"secondary",className:"text-blue-600",children:["B1: ",s?M.filter(i=>Y(i,s,"B1")).length:0]}),e.jsxs(j,{variant:"secondary",className:"text-emerald-600",children:["B2: ",s?M.filter(i=>Y(i,s,"B2")).length:0]}),e.jsxs(j,{variant:"secondary",className:"text-amber-600",children:["Any: ",M.length]})]})]}),e.jsxs("div",{children:[e.jsx(W,{className:"text-xs mb-2 block",children:"Special Skills Required"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:$s.map(i=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(et,{checked:(t.specialSkillsRequired||[]).includes(i),onCheckedChange:()=>Kt(t.id,i)}),e.jsx("span",{className:"text-sm",children:Q[i].label})]},i))})]}),e.jsxs("div",{className:"flex gap-6 mt-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(et,{checked:t.boroscopeRequired||!1,onCheckedChange:()=>qt(t.id)}),e.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-violet-500"}),"Boroscope Required"]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(et,{checked:t.engineRunRequired||!1,onCheckedChange:()=>zt(t.id)}),e.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-500"}),"Engine Run Required"]})]})]})]},t.id)})})})]})]}),e.jsx(we,{value:"employees",className:"space-y-4",children:e.jsxs(G,{children:[e.jsx(ye,{children:e.jsxs(je,{children:["Employees (",o.length,")"]})}),e.jsx(V,{children:e.jsxs(tt,{children:[e.jsx(st,{children:e.jsxs(Ne,{children:[e.jsx(S,{children:"Name"}),e.jsx(S,{children:"Initials"}),e.jsx(S,{children:"Role"}),e.jsx(S,{children:"Department"}),e.jsx(S,{children:"Qualifications"}),e.jsx(S,{children:"Certifications"})]})}),e.jsx(it,{children:o.map(t=>e.jsxs(Ne,{className:J((t.role==="PM"||t.role==="PS")&&"bg-muted/30"),children:[e.jsx(k,{className:"font-medium",children:t.name}),e.jsx(k,{className:"font-mono",children:t.initials}),e.jsx(k,{children:e.jsx(j,{variant:t.role==="PM"||t.role==="PS"?"secondary":"outline",children:t.role})}),e.jsx(k,{className:"text-muted-foreground text-sm",children:t.department}),e.jsx(k,{children:e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[t.skills.filter(s=>s.license).slice(0,6).map((s,i)=>e.jsxs(j,{variant:"secondary",className:J("text-xs",s.license==="B1"&&"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300",s.license==="B2"&&"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-300",s.license==="B1/2"&&"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300"),children:[e.jsx("span",{className:"font-bold mr-1",children:s.aircraftType}),e.jsx("span",{className:"opacity-70",children:"|"}),e.jsx("span",{className:"ml-1",children:s.license})]},i)),t.skills.filter(s=>s.license).length>6&&e.jsxs(j,{variant:"secondary",className:"text-xs",children:["+",t.skills.filter(s=>s.license).length-6]}),t.skills.filter(s=>s.license).length===0&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})]})}),e.jsx(k,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.certifications.slice(0,3).map((s,i)=>e.jsx(j,{variant:"outline",className:"text-xs",children:s},i)),t.certifications.length>3&&e.jsxs(j,{variant:"secondary",className:"text-xs",children:["+",t.certifications.length-3]}),t.certifications.length===0&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})]})})]},t.id))})]})})]})}),e.jsxs(we,{value:"aircraft",className:"space-y-4",children:[e.jsxs(G,{children:[e.jsxs(ye,{className:"flex flex-row items-center justify-between",children:[e.jsxs(je,{children:["Aircraft Fleet (",A.length,")"]}),e.jsxs(ze,{open:$t,onOpenChange:mt,children:[e.jsx(Nt,{asChild:!0,children:e.jsxs(v,{"data-testid":"button-add-aircraft",children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Add Aircraft"]})}),e.jsxs(Ue,{children:[e.jsx(Ge,{children:e.jsx(Ve,{children:"Add New Aircraft"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Registration"}),e.jsx(He,{placeholder:"e.g., HB-JCC",value:Le,onChange:t=>ut(t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Aircraft Type"}),e.jsxs(se,{value:pt,onValueChange:Ot,children:[e.jsx(ie,{children:e.jsx(ae,{})}),e.jsx(re,{children:cs.map(t=>e.jsx(L,{value:t,children:t},t))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{children:"Company"}),e.jsxs(se,{value:ft,onValueChange:Pt,children:[e.jsx(ie,{children:e.jsx(ae,{})}),e.jsxs(re,{children:[e.jsx(L,{value:"LX",children:"LX (Swiss)"}),e.jsx(L,{value:"WK",children:"WK (Edelweiss)"})]})]})]})]}),e.jsxs(Qe,{children:[e.jsx(vt,{asChild:!0,children:e.jsx(v,{variant:"outline",children:"Cancel"})}),e.jsx(v,{onClick:Gt,children:"Add Aircraft"})]})]})]})]}),e.jsx(V,{children:e.jsxs(tt,{children:[e.jsx(st,{children:e.jsxs(Ne,{children:[e.jsx(S,{children:"Registration"}),e.jsx(S,{children:"Type"}),e.jsx(S,{children:"Company"}),e.jsx(S,{children:"Qualified B1"}),e.jsx(S,{children:"Qualified B2"}),e.jsx(S,{className:"text-right",children:"Actions"})]})}),e.jsx(it,{children:A.map(t=>e.jsxs(Ne,{children:[e.jsx(k,{className:"font-mono font-bold",children:t.registration}),e.jsx(k,{children:e.jsx(j,{variant:"outline",children:t.type})}),e.jsx(k,{children:t.company}),e.jsx(k,{children:e.jsxs(j,{variant:"secondary",children:[M.filter(s=>Y(s,t,"B1")).length," available"]})}),e.jsx(k,{children:e.jsxs(j,{variant:"secondary",children:[M.filter(s=>Y(s,t,"B2")).length," available"]})}),e.jsx(k,{className:"text-right",children:e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>Je(t),className:"text-destructive hover:text-destructive",children:e.jsx(Ye,{className:"w-4 h-4"})})})]},t.id))})]})})]}),e.jsx(ze,{open:!!de,onOpenChange:()=>Je(null),children:e.jsxs(Ue,{children:[e.jsx(Ge,{children:e.jsx(Ve,{children:"Remove Aircraft"})}),e.jsxs("p",{className:"py-4",children:["Are you sure you want to remove ",e.jsx("strong",{children:de?.registration})," (",de?.type,") from the fleet? This will also remove all associated work requirements and assignments."]}),e.jsxs(Qe,{children:[e.jsx(v,{variant:"outline",onClick:()=>Je(null),children:"Cancel"}),e.jsx(v,{variant:"destructive",onClick:Vt,children:"Remove Aircraft"})]})]})})]})]})]})}export{Qs as AeroStaffPage};
