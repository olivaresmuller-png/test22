import{c as mt,a7 as ft,t as ue,a as L,a8 as Qt,a9 as St,aa as Wt,ab as Ut,L as qe,ac as ht,v as Xt,b as xt,ad as pt,ae as Kt,af as st,ag as Vt,ah as rt,ai as Zt,r as m,j as r,aj as Jt,l as K,R as es,N as gt,O as ts,ak as ss,Q as Ye,al as rs,V as ns,u as as,a6 as is,G as Ee,E as nt,z as te,a3 as pe,a4 as ge,B as I,a2 as be,K as os,I as se,$ as at,H as Ae,T as ls,am as cs,k as Y,w as it,q as ye,an as ot}from"./index-CI72K9i1.js";import{L as V,B}from"./label-z0vxqCoA.js";import{P as Pe,T as ds,C as we}from"./checkbox-POL6qR8n.js";import{S as Ie}from"./scroll-area-CMybtgpe.js";import{T as us,a as ms,b as lt,c as ct}from"./tabs-Cj8txYyn.js";import{S as fs,a as hs,f as xs,b as ps,e as gs}from"./select-DhOR1Qsq.js";import{F as Oe}from"./funnel-DuIUxed1.js";import{P as bs}from"./pen-Dp87l7uz.js";import{s as ys,C as _e,a as dt}from"./setWeek-CC9fEd-6.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Ns=mt("lightbulb",ws);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],js=mt("save",vs);function Ts(){return Object.assign({},ft())}function ks(a){let t=ue(a).getDay();return t===0&&(t=7),t}function Cs(a,e){const t=e instanceof Date?L(e,0):new e(0);return t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),t.setHours(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()),t}const Ds=10;class bt{subPriority=0;validate(e,t){return!0}}class Ms extends bt{constructor(e,t,s,i,c){super(),this.value=e,this.validateValue=t,this.setValue=s,this.priority=i,c&&(this.subPriority=c)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,s){return this.setValue(e,t,this.value,s)}}class Rs extends bt{priority=Ds;subPriority=-1;set(e,t){return t.timestampIsSet?e:L(e,Cs(e,Date))}}class g{run(e,t,s,i){const c=this.parse(e,t,s,i);return c?{setter:new Ms(c.value,this.validate,this.set,this.priority,this.subPriority),rest:c.rest}:null}validate(e,t,s){return!0}}class Es extends g{priority=140;parse(e,t,s){switch(t){case"G":case"GG":case"GGG":return s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"});case"GGGGG":return s.era(e,{width:"narrow"});case"GGGG":default:return s.era(e,{width:"wide"})||s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"})}}set(e,t,s){return t.era=s,e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const D={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},G={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function M(a,e){return a&&{value:e(a.value),rest:a.rest}}function w(a,e){const t=e.match(a);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function z(a,e){const t=e.match(a);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const s=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,c=t[3]?parseInt(t[3],10):0,l=t[5]?parseInt(t[5],10):0;return{value:s*(i*Qt+c*St+l*Wt),rest:e.slice(t[0].length)}}function yt(a){return w(D.anyDigitsSigned,a)}function T(a,e){switch(a){case 1:return w(D.singleDigit,e);case 2:return w(D.twoDigits,e);case 3:return w(D.threeDigits,e);case 4:return w(D.fourDigits,e);default:return w(new RegExp("^\\d{1,"+a+"}"),e)}}function ve(a,e){switch(a){case 1:return w(D.singleDigitSigned,e);case 2:return w(D.twoDigitsSigned,e);case 3:return w(D.threeDigitsSigned,e);case 4:return w(D.fourDigitsSigned,e);default:return w(new RegExp("^-?\\d{1,"+a+"}"),e)}}function Be(a){switch(a){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function wt(a,e){const t=e>0,s=t?e:1-e;let i;if(s<=50)i=a||100;else{const c=s+50,l=Math.trunc(c/100)*100,h=a>=c%100;i=a+l-(h?100:0)}return t?i:1-i}function Nt(a){return a%400===0||a%4===0&&a%100!==0}class As extends g{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,s){const i=c=>({year:c,isTwoDigitYear:t==="yy"});switch(t){case"y":return M(T(4,e),i);case"yo":return M(s.ordinalNumber(e,{unit:"year"}),i);default:return M(T(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,s){const i=e.getFullYear();if(s.isTwoDigitYear){const l=wt(s.year,i);return e.setFullYear(l,0,1),e.setHours(0,0,0,0),e}const c=!("era"in t)||t.era===1?s.year:1-s.year;return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}}class Ps extends g{priority=130;parse(e,t,s){const i=c=>({year:c,isTwoDigitYear:t==="YY"});switch(t){case"Y":return M(T(4,e),i);case"Yo":return M(s.ordinalNumber(e,{unit:"year"}),i);default:return M(T(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,s,i){const c=Ut(e,i);if(s.isTwoDigitYear){const h=wt(s.year,c);return e.setFullYear(h,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),qe(e,i)}const l=!("era"in t)||t.era===1?s.year:1-s.year;return e.setFullYear(l,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),qe(e,i)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Is extends g{priority=130;parse(e,t){return ve(t==="R"?4:t.length,e)}set(e,t,s){const i=L(e,0);return i.setFullYear(s,0,4),i.setHours(0,0,0,0),ht(i)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Os extends g{priority=130;parse(e,t){return ve(t==="u"?4:t.length,e)}set(e,t,s){return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class _s extends g{priority=120;parse(e,t,s){switch(t){case"Q":case"QQ":return T(t.length,e);case"Qo":return s.ordinalNumber(e,{unit:"quarter"});case"QQQ":return s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(e,{width:"wide",context:"formatting"})||s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Ls extends g{priority=120;parse(e,t,s){switch(t){case"q":case"qq":return T(t.length,e);case"qo":return s.ordinalNumber(e,{unit:"quarter"});case"qqq":return s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(e,{width:"wide",context:"standalone"})||s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class qs extends g{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,s){const i=c=>c-1;switch(t){case"M":return M(w(D.month,e),i);case"MM":return M(T(2,e),i);case"Mo":return M(s.ordinalNumber(e,{unit:"month"}),i);case"MMM":return s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(e,{width:"wide",context:"formatting"})||s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}class Ys extends g{priority=110;parse(e,t,s){const i=c=>c-1;switch(t){case"L":return M(w(D.month,e),i);case"LL":return M(T(2,e),i);case"Lo":return M(s.ordinalNumber(e,{unit:"month"}),i);case"LLL":return s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(e,{width:"wide",context:"standalone"})||s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}class Bs extends g{priority=100;parse(e,t,s){switch(t){case"w":return w(D.week,e);case"wo":return s.ordinalNumber(e,{unit:"week"});default:return T(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,s,i){return qe(ys(e,s,i),i)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Hs(a,e){const t=ue(a),s=Xt(t)-e;return t.setDate(t.getDate()-s*7),t}class $s extends g{priority=100;parse(e,t,s){switch(t){case"I":return w(D.week,e);case"Io":return s.ordinalNumber(e,{unit:"week"});default:return T(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,s){return ht(Hs(e,s))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Fs=[31,28,31,30,31,30,31,31,30,31,30,31],Gs=[31,29,31,30,31,30,31,31,30,31,30,31];class zs extends g{priority=90;subPriority=1;parse(e,t,s){switch(t){case"d":return w(D.date,e);case"do":return s.ordinalNumber(e,{unit:"date"});default:return T(t.length,e)}}validate(e,t){const s=e.getFullYear(),i=Nt(s),c=e.getMonth();return i?t>=1&&t<=Gs[c]:t>=1&&t<=Fs[c]}set(e,t,s){return e.setDate(s),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class Qs extends g{priority=90;subpriority=1;parse(e,t,s){switch(t){case"D":case"DD":return w(D.dayOfYear,e);case"Do":return s.ordinalNumber(e,{unit:"date"});default:return T(t.length,e)}}validate(e,t){const s=e.getFullYear();return Nt(s)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,s){return e.setMonth(0,s),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function He(a,e,t){const s=ft(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,c=ue(a),l=c.getDay(),b=(e%7+7)%7,k=7-i,y=e<0||e>6?e-(l+k)%7:(b+k)%7-(l+k)%7;return xt(c,y)}class Ss extends g{priority=90;parse(e,t,s){switch(t){case"E":case"EE":case"EEE":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,s,i){return e=He(e,s,i),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class Ws extends g{priority=90;parse(e,t,s,i){const c=l=>{const h=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+h};switch(t){case"e":case"ee":return M(T(t.length,e),c);case"eo":return M(s.ordinalNumber(e,{unit:"day"}),c);case"eee":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeeee":return s.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,s,i){return e=He(e,s,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Us extends g{priority=90;parse(e,t,s,i){const c=l=>{const h=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+h};switch(t){case"c":case"cc":return M(T(t.length,e),c);case"co":return M(s.ordinalNumber(e,{unit:"day"}),c);case"ccc":return s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"ccccc":return s.day(e,{width:"narrow",context:"standalone"});case"cccccc":return s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(e,{width:"wide",context:"standalone"})||s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,s,i){return e=He(e,s,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Xs(a,e){const t=ue(a),s=ks(t),i=e-s;return xt(t,i)}class Ks extends g{priority=90;parse(e,t,s){const i=c=>c===0?7:c;switch(t){case"i":case"ii":return T(t.length,e);case"io":return s.ordinalNumber(e,{unit:"day"});case"iii":return M(s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return M(s.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return M(s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return M(s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,t){return t>=1&&t<=7}set(e,t,s){return e=Xs(e,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Vs extends g{priority=80;parse(e,t,s){switch(t){case"a":case"aa":case"aaa":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,s){return e.setHours(Be(s),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class Zs extends g{priority=80;parse(e,t,s){switch(t){case"b":case"bb":case"bbb":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,s){return e.setHours(Be(s),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Js extends g{priority=80;parse(e,t,s){switch(t){case"B":case"BB":case"BBB":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,s){return e.setHours(Be(s),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class er extends g{priority=70;parse(e,t,s){switch(t){case"h":return w(D.hour12h,e);case"ho":return s.ordinalNumber(e,{unit:"hour"});default:return T(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,s){const i=e.getHours()>=12;return i&&s<12?e.setHours(s+12,0,0,0):!i&&s===12?e.setHours(0,0,0,0):e.setHours(s,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class tr extends g{priority=70;parse(e,t,s){switch(t){case"H":return w(D.hour23h,e);case"Ho":return s.ordinalNumber(e,{unit:"hour"});default:return T(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,s){return e.setHours(s,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class sr extends g{priority=70;parse(e,t,s){switch(t){case"K":return w(D.hour11h,e);case"Ko":return s.ordinalNumber(e,{unit:"hour"});default:return T(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,s){return e.getHours()>=12&&s<12?e.setHours(s+12,0,0,0):e.setHours(s,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class rr extends g{priority=70;parse(e,t,s){switch(t){case"k":return w(D.hour24h,e);case"ko":return s.ordinalNumber(e,{unit:"hour"});default:return T(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,s){const i=s<=24?s%24:s;return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class nr extends g{priority=60;parse(e,t,s){switch(t){case"m":return w(D.minute,e);case"mo":return s.ordinalNumber(e,{unit:"minute"});default:return T(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,s){return e.setMinutes(s,0,0),e}incompatibleTokens=["t","T"]}class ar extends g{priority=50;parse(e,t,s){switch(t){case"s":return w(D.second,e);case"so":return s.ordinalNumber(e,{unit:"second"});default:return T(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,s){return e.setSeconds(s,0),e}incompatibleTokens=["t","T"]}class ir extends g{priority=30;parse(e,t){const s=i=>Math.trunc(i*Math.pow(10,-t.length+3));return M(T(t.length,e),s)}set(e,t,s){return e.setMilliseconds(s),e}incompatibleTokens=["t","T"]}class or extends g{priority=10;parse(e,t){switch(t){case"X":return z(G.basicOptionalMinutes,e);case"XX":return z(G.basic,e);case"XXXX":return z(G.basicOptionalSeconds,e);case"XXXXX":return z(G.extendedOptionalSeconds,e);case"XXX":default:return z(G.extended,e)}}set(e,t,s){return t.timestampIsSet?e:L(e,e.getTime()-pt(e)-s)}incompatibleTokens=["t","T","x"]}class lr extends g{priority=10;parse(e,t){switch(t){case"x":return z(G.basicOptionalMinutes,e);case"xx":return z(G.basic,e);case"xxxx":return z(G.basicOptionalSeconds,e);case"xxxxx":return z(G.extendedOptionalSeconds,e);case"xxx":default:return z(G.extended,e)}}set(e,t,s){return t.timestampIsSet?e:L(e,e.getTime()-pt(e)-s)}incompatibleTokens=["t","T","X"]}class cr extends g{priority=40;parse(e){return yt(e)}set(e,t,s){return[L(e,s*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class dr extends g{priority=20;parse(e){return yt(e)}set(e,t,s){return[L(e,s),{timestampIsSet:!0}]}incompatibleTokens="*"}const ur={G:new Es,y:new As,Y:new Ps,R:new Is,u:new Os,Q:new _s,q:new Ls,M:new qs,L:new Ys,w:new Bs,I:new $s,d:new zs,D:new Qs,E:new Ss,e:new Ws,c:new Us,i:new Ks,a:new Vs,b:new Zs,B:new Js,h:new er,H:new tr,K:new sr,k:new rr,m:new nr,s:new ar,S:new ir,X:new or,x:new lr,t:new cr,T:new dr},mr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hr=/^'([^]*?)'?$/,xr=/''/g,pr=/\S/,gr=/[a-zA-Z]/;function Z(a,e,t,s){const i=Ts(),c=i.locale??Kt,l=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,h=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,b={firstWeekContainsDate:l,weekStartsOn:h,locale:c},k=[new Rs],y=e.match(fr).map(f=>{const x=f[0];if(x in st){const C=st[x];return C(f,c.formatLong)}return f}).join("").match(mr),A=[];for(let f of y){Vt(f)&&rt(f,e,a),Zt(f)&&rt(f,e,a);const x=f[0],C=ur[x];if(C){const{incompatibleTokens:R}=C;if(Array.isArray(R)){const J=A.find(re=>R.includes(re.token)||re.token===x);if(J)throw new RangeError(`The format string mustn't contain \`${J.fullToken}\` and \`${f}\` at the same time`)}else if(C.incompatibleTokens==="*"&&A.length>0)throw new RangeError(`The format string mustn't contain \`${f}\` and any other token at the same time`);A.push({token:x,fullToken:f});const Q=C.run(a,f,c.match,b);if(!Q)return L(t,NaN);k.push(Q.setter),a=Q.rest}else{if(x.match(gr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");if(f==="''"?f="'":x==="'"&&(f=br(f)),a.indexOf(f)===0)a=a.slice(f.length);else return L(t,NaN)}}if(a.length>0&&pr.test(a))return L(t,NaN);const W=k.map(f=>f.priority).sort((f,x)=>x-f).filter((f,x,C)=>C.indexOf(f)===x).map(f=>k.filter(x=>x.priority===f).sort((x,C)=>C.subPriority-x.subPriority)).map(f=>f[0]);let _=ue(t);if(isNaN(_.getTime()))return L(t,NaN);const q={};for(const f of W){if(!f.validate(_,b))return L(t,NaN);const x=f.set(_,q,b);Array.isArray(x)?(_=x[0],Object.assign(q,x[1])):_=x}return L(t,_)}function br(a){return a.match(hr)[1].replace(xr,"'")}var yr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wr=yr.reduce((a,e)=>{const t=Jt(`Primitive.${e}`),s=m.forwardRef((i,c)=>{const{asChild:l,...h}=i,b=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(b,{...h,ref:c})});return s.displayName=`Primitive.${e}`,{...a,[e]:s}},{}),Nr="Separator",ut="horizontal",vr=["horizontal","vertical"],vt=m.forwardRef((a,e)=>{const{decorative:t,orientation:s=ut,...i}=a,c=jr(s)?s:ut,h=t?{role:"none"}:{"aria-orientation":c==="vertical"?c:void 0,role:"separator"};return r.jsx(wr.div,{"data-orientation":c,...h,...i,ref:e})});vt.displayName=Nr;function jr(a){return vr.includes(a)}var jt=vt;const de=m.forwardRef(({className:a,orientation:e="horizontal",decorative:t=!0,...s},i)=>r.jsx(jt,{ref:i,decorative:t,orientation:e,className:K("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",a),...s}));de.displayName=jt.displayName;function Tr(a,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(a?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}var kr=es[" useInsertionEffect ".trim().toString()]||gt;function Cr({prop:a,defaultProp:e,onChange:t=()=>{},caller:s}){const[i,c,l]=Dr({defaultProp:e,onChange:t}),h=a!==void 0,b=h?a:i;{const y=m.useRef(a!==void 0);m.useEffect(()=>{const A=y.current;A!==h&&console.warn(`${s} is changing from ${A?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=h},[h,s])}const k=m.useCallback(y=>{if(h){const A=Mr(y)?y(a):y;A!==a&&l.current?.(A)}else c(y)},[h,a,c,l]);return[b,k]}function Dr({defaultProp:a,onChange:e}){const[t,s]=m.useState(a),i=m.useRef(t),c=m.useRef(e);return kr(()=>{c.current=e},[e]),m.useEffect(()=>{i.current!==t&&(c.current?.(t),i.current=t)},[t,i]),[t,s,c]}function Mr(a){return typeof a=="function"}var je="Collapsible",[Rr]=ts(je),[Er,$e]=Rr(je),Tt=m.forwardRef((a,e)=>{const{__scopeCollapsible:t,open:s,defaultOpen:i,disabled:c,onOpenChange:l,...h}=a,[b,k]=Cr({prop:s,defaultProp:i??!1,onChange:l,caller:je});return r.jsx(Er,{scope:t,disabled:c,contentId:ss(),open:b,onOpenToggle:m.useCallback(()=>k(y=>!y),[k]),children:r.jsx(Ye.div,{"data-state":Ge(b),"data-disabled":c?"":void 0,...h,ref:e})})});Tt.displayName=je;var kt="CollapsibleTrigger",Ct=m.forwardRef((a,e)=>{const{__scopeCollapsible:t,...s}=a,i=$e(kt,t);return r.jsx(Ye.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":Ge(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...s,ref:e,onClick:Tr(a.onClick,i.onOpenToggle)})});Ct.displayName=kt;var Fe="CollapsibleContent",Dt=m.forwardRef((a,e)=>{const{forceMount:t,...s}=a,i=$e(Fe,a.__scopeCollapsible);return r.jsx(rs,{present:t||i.open,children:({present:c})=>r.jsx(Ar,{...s,ref:e,present:c})})});Dt.displayName=Fe;var Ar=m.forwardRef((a,e)=>{const{__scopeCollapsible:t,present:s,children:i,...c}=a,l=$e(Fe,t),[h,b]=m.useState(s),k=m.useRef(null),y=ns(e,k),A=m.useRef(0),W=A.current,_=m.useRef(0),q=_.current,f=l.open||h,x=m.useRef(f),C=m.useRef(void 0);return m.useEffect(()=>{const R=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(R)},[]),gt(()=>{const R=k.current;if(R){C.current=C.current||{transitionDuration:R.style.transitionDuration,animationName:R.style.animationName},R.style.transitionDuration="0s",R.style.animationName="none";const Q=R.getBoundingClientRect();A.current=Q.height,_.current=Q.width,x.current||(R.style.transitionDuration=C.current.transitionDuration,R.style.animationName=C.current.animationName),b(s)}},[l.open,s]),r.jsx(Ye.div,{"data-state":Ge(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!f,...c,ref:y,style:{"--radix-collapsible-content-height":W?`${W}px`:void 0,"--radix-collapsible-content-width":q?`${q}px`:void 0,...a.style},children:f&&i})});function Ge(a){return a?"open":"closed"}var Pr=Tt;const Ir=Pr,Or=Ct,_r=Dt,Ne=[{id:"A32CFM Boro",label:"Borescope A320 CFM",reqAircraft:"A320 CF",excludes:["Boro ALL"]},{id:"A32PW Boro",label:"Borescope A320 PW",reqAircraft:"A320 NEO",excludes:["Boro ALL"]},{id:"A330RR Boro",label:"Borescope A330 RR",reqAircraft:"A330 RR",excludes:["Boro ALL"]},{id:"A340 Boro",label:"Borescope A340",reqAircraft:"A343",excludes:["Boro ALL"]},{id:"A350 Boro",label:"Borescope A350",reqAircraft:"A350",excludes:["Boro ALL"]},{id:"A220 Boro",label:"Borescope A220",reqAircraft:"A220",excludes:["Boro ALL"]},{id:"B777 Boro",label:"Borescope B777",reqAircraft:"B777",excludes:["Boro ALL"]},{id:"A220 RU",label:"Run Up A220",reqAircraft:"A220"},{id:"A320 RU",label:"Run Up A320",reqAircraft:"A320 CF",excludes:["32S RU"]},{id:"A320NEO RU",label:"Run Up A320 NEO",reqAircraft:"A320 NEO",excludes:["32 RU PW"]},{id:"A330 RU",label:"Run Up A330",reqAircraft:"A330 RR"},{id:"A343 RU",label:"Run Up A343",reqAircraft:"A343",excludes:["343 RU"]},{id:"A350 RU",label:"Run Up A350",reqAircraft:"A350",excludes:["A350 RU"]},{id:"B777 RU",label:"Run Up B777",reqAircraft:"B777",excludes:["777 RU"]},{id:"FUEL TANK",label:"Fuel Tank Safety",reqAircraft:null,excludes:["FUEL TANK"]},{id:"Walliclean",label:"Walliclean",reqAircraft:null},{id:"Forklift",label:"Forklift",reqAircraft:null},{id:"CYCLEAN",label:"Cyclean",reqAircraft:null,excludes:["CS RU","CYCLEAN"]},{id:"Cobra",label:"Cobra",reqAircraft:null},{id:"Cee Bee",label:"Cee Bee",reqAircraft:null,excludes:["Cee Bee"]},{id:"OXY Hand",label:"Oxygen Handling",reqAircraft:null,excludes:["OXY Hand"]},{id:"ENTRY",label:"Entry/Confined Space",reqAircraft:null,excludes:["ENTRY"]}],Le={LA:{type:"vacation",label:"Annual Leave"},LD:{type:"vacation",label:"Day Off"},K:{type:"sick",label:"Sick Leave"},ED:{type:"training",label:"Education/Training"},CO:{type:"comp",label:"Comp Day"},MI:{type:"other",label:"Military"},Fe:{type:"other",label:"Holiday"},KK:{type:"sick",label:"Child Sick"}},Mt="aerostaff_trainings",Lr=()=>{try{const a=localStorage.getItem(Mt);return a?JSON.parse(a):[]}catch{return[]}},qr=a=>{localStorage.setItem(Mt,JSON.stringify(a))};function Wr(){const{employees:a,assignments:e,getAssignment:t,dailyTargets:s}=as(),[i,c]=m.useState(Lr),[l,h]=m.useState(null),[b,k]=m.useState(!1),[y,A]=m.useState(!1),[W,_]=m.useState(""),[q,f]=m.useState([]),[x,C]=m.useState([]),[R,Q]=m.useState(""),[J,re]=m.useState("216"),[me,Rt]=m.useState(""),[Et,ze]=m.useState("saved"),[U,Qe]=m.useState(""),[ne,fe]=m.useState([]),[he,Te]=m.useState([]);m.useMemo(()=>{l&&!y&&Te(l.selectedEmployees)},[l,y]);const Se=n=>{Te(o=>o.includes(n)?o.filter(u=>u!==n):[...o,n])},ae=m.useMemo(()=>{if(!U)return[];const n=Ne.find(o=>o.id===U);return n?a.filter(o=>o.certifications.includes(n.id)||n.excludes&&n.excludes.some(u=>o.certifications.includes(u))?!1:n.reqAircraft?o.skills.some(p=>is(p.aircraftType,n.reqAircraft)&&(p.license==="B1"||p.license==="B1/2")):!0):[]},[a,U]),We=n=>{fe(o=>o.includes(n)?o.filter(u=>u!==n):[...o,n])},At=()=>{const n=Ne.find(u=>u.id===U);if(!n)return;const o={id:`training_${Date.now()}`,name:`${n.label} Training`,dateRanges:[{id:`range_${Date.now()}`,startDate:"",endDate:""}],selectedEmployees:ne,createdAt:new Date().toISOString()};ie([...i,o]),h(o),ke(o),ze("saved"),Qe(""),fe([])},ie=n=>{c(n),qr(n)},Pt=()=>{const n={id:`training_${Date.now()}`,name:"New Training",dateRanges:[{id:`range_${Date.now()}`,startDate:"",endDate:""}],selectedEmployees:[],createdAt:new Date().toISOString()};ie([...i,n]),h(n),ke(n)},ke=n=>{_(n.name),f([...n.dateRanges]),C([...n.selectedEmployees]),Q(n.maxGroupSize?.toString()||""),re(n.minManhours?.toString()||"216"),k(!0),A(!1)},It=()=>{k(!1),l?.name==="New Training"&&l.dateRanges[0]?.startDate===""&&(ie(i.filter(n=>n.id!==l.id)),h(null))},Ot=()=>{if(!l)return;const n={...l,name:W,dateRanges:q.filter(o=>o.startDate&&o.endDate),selectedEmployees:x,maxGroupSize:R?parseInt(R):void 0,minManhours:J?parseFloat(J):216};ie(i.map(o=>o.id===n.id?n:o)),h(n),k(!1)},_t=n=>{ie(i.filter(o=>o.id!==n)),l?.id===n&&(h(null),k(!1))},Lt=()=>{f([...q,{id:`range_${Date.now()}`,startDate:"",endDate:""}])},qt=n=>{f(q.filter(o=>o.id!==n))},Ue=(n,o,u)=>{f(q.map(p=>p.id===n?{...p,[o]:u}:p))},Xe=n=>{x.includes(n)?C(x.filter(o=>o!==n)):C([...x,n])},Yt=()=>{C(a.map(n=>n.id))},Bt=()=>{C([])},Ht=m.useMemo(()=>{if(!me)return a;const n=me.toLowerCase();return a.filter(o=>o.name.toLowerCase().includes(n)||o.initials.toLowerCase().includes(n))},[a,me]),$t=()=>{if(!l)return[];const n=[];return l.dateRanges.forEach(o=>{if(!o.startDate||!o.endDate)return;let u,p;try{u=Z(o.startDate,"yyyy-MM-dd",new Date),p=Z(o.endDate,"yyyy-MM-dd",new Date)}catch{return}const N=it({start:u,end:p});l.selectedEmployees.forEach(d=>{const v=a.find(H=>H.id===d);if(!v)return;const j=[];N.forEach(H=>{const S=Y(H,"yyyy-MM-dd"),$=t(S,d);$&&Le[$]&&j.push({date:S,type:Le[$].type,code:$})});let P=null;const E=[];N.forEach(H=>{const S=Y(H,"yyyy-MM-dd"),$=a.filter(F=>{const ce=t(S,F.id);return ye(ce||"-")}),oe=$.filter(F=>F.role==="SrEng"||F.role==="PM").length,O=$.filter(F=>F.role==="PS").length,X=a.reduce((F,ce)=>{if(ce.id===v.id)return F;const tt=t(S,ce.id);if(ye(tt||"-")){const zt=ot(tt)||0;return F+zt*(ce.grade/100)}return F},0),le=s[S],xe=le!==void 0?le:l.minManhours||216;(v.role==="SrEng"||v.role==="PM")&&oe<=6?E.push(`${Y(H,"dd.MM")}: Would leave Senior staff below min (6), currently ${oe}`):v.role==="PS"&&O<=2&&E.push(`${Y(H,"dd.MM")}: Would leave PS below min (2), currently ${O}`),X<xe&&E.push(`${Y(H,"dd.MM")}: Manhours would drop to ${X.toFixed(1)} (min ${xe})`)}),E.length>0&&(P=E.join(`
`));let ee="available";j.length>0?ee="conflict":P&&(ee="staffing_issue"),n.push({employeeId:d,employeeName:v.name,dateRangeId:o.id,status:ee,conflicts:j,staffingImpact:P})})}),n},[Ce,Ke]=m.useState([]),[Ve,Ze]=m.useState(!1),De=(n=he)=>{if(!l)return{};const o={};return l.dateRanges.forEach(u=>{if(!u.startDate||!u.endDate)return;let p,N;try{p=Z(u.startDate,"yyyy-MM-dd",new Date),N=Z(u.endDate,"yyyy-MM-dd",new Date)}catch{return}const d=it({start:p,end:N}),v=[];d.forEach(j=>{const P=Y(j,"yyyy-MM-dd"),E=a.reduce((O,X)=>{if(n.includes(X.id))return O;const le=t(P,X.id);if(ye(le||"-")){const xe=ot(le)||0;return O+xe*(X.grade/100)}return O},0),ee=a.filter(O=>{if(n.includes(O.id))return!1;const X=t(P,O.id);return ye(X||"-")}),H=ee.filter(O=>O.role==="SrEng"||O.role==="PM").length,S=ee.filter(O=>O.role==="PS").length,$=s[P],oe=$!==void 0?$:l.minManhours||216;E<oe&&v.push(`${Y(j,"dd.MM")}: Group removal drops manhours to ${E.toFixed(1)} (min ${oe})`),H<=6&&v.push(`${Y(j,"dd.MM")}: Group removal drops Senior staff to ${H} (min 6)`),S<=2&&v.push(`${Y(j,"dd.MM")}: Group removal drops PS to ${S} (min 2)`)}),v.length>0&&(o[u.id]=v)}),o},Ft=()=>{if(!l)return;Ze(!0),Ke([]);const n=[],o=he;l.dateRanges.forEach(u=>{for(let p=0;p<o.length;p++){const N=o[p],d=o.filter(j=>j!==N);if(!De(d)[u.id]&&(n.push({kept:d,removed:[N],rangeId:u.id}),n.filter(j=>j.rangeId===u.id).length>=2))break}if(n.filter(p=>p.rangeId===u.id).length===0&&o.length>2)for(let p=0;p<o.length;p++){for(let N=p+1;N<o.length;N++){const d=o[p],v=o[N],j=o.filter(E=>E!==d&&E!==v);if(!De(j)[u.id]&&(n.push({kept:j,removed:[d,v],rangeId:u.id}),n.filter(E=>E.rangeId===u.id).length>=1))break}if(n.filter(N=>N.rangeId===u.id).length>=1)break}}),Ke(n),Ze(!1)},Gt=m.useMemo(()=>!y||!l?{}:De(),[y,l,a,e,s,he]),Me=m.useMemo(()=>!y||!l?[]:$t(),[y,l,a,e]),Je=n=>{const o=Me.filter(d=>d.dateRangeId===n),u=o.filter(d=>d.status==="available").length,p=o.filter(d=>d.status==="conflict").length,N=o.filter(d=>d.status==="staffing_issue").length;return{available:u,conflicts:p,staffing:N,total:o.length}},et=()=>{if(!l||l.dateRanges.length===0)return null;let n=null,o=-1;return l.dateRanges.forEach(u=>{const p=Je(u.id);p.available>o&&(o=p.available,n=u)}),n},Re=n=>{if(!n.startDate||!n.endDate)return"Not set";try{const o=Z(n.startDate,"yyyy-MM-dd",new Date),u=Z(n.endDate,"yyyy-MM-dd",new Date);return`${Y(o,"dd.MM.yyyy")} - ${Y(u,"dd.MM.yyyy")}`}catch{return"Invalid dates"}};return r.jsxs("div",{className:"space-y-6","data-testid":"training-page",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-3",children:[r.jsx(Ee,{className:"h-8 w-8 text-primary"}),"Training Availability"]}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Check employee availability for training courses"})]})}),r.jsxs(us,{value:Et,onValueChange:ze,className:"w-full",children:[r.jsxs(ms,{className:"mb-4 bg-muted/50 p-1",children:[r.jsxs(lt,{value:"saved",className:"px-6 flex items-center gap-2",children:[r.jsx(nt,{className:"h-4 w-4"}),"Saved Trainings"]}),r.jsxs(lt,{value:"planner",className:"px-6 flex items-center gap-2",children:[r.jsx(Oe,{className:"h-4 w-4"}),"Training Planner"]})]}),r.jsx(ct,{value:"saved",className:"mt-0",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[r.jsx("div",{className:"lg:col-span-4",children:r.jsxs(te,{children:[r.jsx(pe,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ge,{className:"text-lg",children:"Saved Trainings"}),r.jsxs(I,{size:"sm",onClick:Pt,"data-testid":"button-new-training",children:[r.jsx(Pe,{className:"h-4 w-4 mr-1"}),"New"]})]})}),r.jsx(be,{children:r.jsx(Ie,{className:"h-[500px]",children:i.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(Ee,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No trainings saved yet"}),r.jsx("p",{className:"text-sm",children:'Click "New" to create one'})]}):r.jsx("div",{className:"space-y-2",children:i.map(n=>r.jsx("div",{onClick:()=>{h(n),k(!1),A(!1)},className:K("p-3 rounded-lg border cursor-pointer transition-colors",l?.id===n.id?"bg-primary/10 border-primary":"hover:bg-muted/50 border-transparent"),"data-testid":`training-item-${n.id}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium truncate",children:n.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.selectedEmployees.length," employees · ",n.dateRanges.length," date option(s)"]})]}),r.jsx(os,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"})]})},n.id))})})})]})}),r.jsx("div",{className:"lg:col-span-8",children:l?r.jsxs(te,{children:[r.jsx(pe,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[b?r.jsx(se,{value:W,onChange:n=>_(n.target.value),className:"text-xl font-semibold max-w-md",placeholder:"Training name","data-testid":"input-training-name"}):r.jsx(ge,{className:"text-xl",children:l.name}),r.jsx("div",{className:"flex items-center gap-2",children:b?r.jsxs(r.Fragment,{children:[r.jsxs(I,{variant:"outline",size:"sm",onClick:It,children:[r.jsx(at,{className:"h-4 w-4 mr-1"}),"Cancel"]}),r.jsxs(I,{size:"sm",onClick:Ot,"data-testid":"button-save-training",children:[r.jsx(js,{className:"h-4 w-4 mr-1"}),"Save"]})]}):r.jsxs(r.Fragment,{children:[r.jsxs(I,{variant:"outline",size:"sm",onClick:()=>ke(l),children:[r.jsx(bs,{className:"h-4 w-4 mr-1"}),"Edit"]}),r.jsxs(I,{variant:"destructive",size:"sm",onClick:()=>_t(l.id),children:[r.jsx(ds,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]})}),r.jsxs(be,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs(V,{className:"text-base font-semibold flex items-center gap-2 mb-3",children:[r.jsx(nt,{className:"h-4 w-4"}),"Date Options"]}),b?r.jsxs("div",{className:"space-y-3",children:[q.map((n,o)=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"text-sm text-muted-foreground w-16",children:["Option ",o+1]}),r.jsx(se,{type:"date",value:n.startDate,onChange:u=>Ue(n.id,"startDate",u.target.value),className:"w-40"}),r.jsx("span",{className:"text-muted-foreground",children:"to"}),r.jsx(se,{type:"date",value:n.endDate,onChange:u=>Ue(n.id,"endDate",u.target.value),className:"w-40"}),q.length>1&&r.jsx(I,{variant:"ghost",size:"icon",onClick:()=>qt(n.id),children:r.jsx(at,{className:"h-4 w-4"})})]},n.id)),r.jsxs(I,{variant:"outline",size:"sm",onClick:Lt,children:[r.jsx(Pe,{className:"h-4 w-4 mr-1"}),"Add Date Option"]})]}):r.jsx("div",{className:"flex flex-wrap gap-2",children:l.dateRanges.map((n,o)=>r.jsxs(B,{variant:"secondary",className:"text-sm py-1 px-3",children:["Option ",o+1,": ",Re(n)]},n.id))})]}),r.jsx(de,{}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs(V,{className:"text-base font-semibold flex items-center gap-2",children:[r.jsx(Ae,{className:"h-4 w-4"}),"Employees (",b?x.length:l.selectedEmployees.length,")"]}),b&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(se,{placeholder:"Search...",value:me,onChange:n=>Rt(n.target.value),className:"w-40 h-8"}),r.jsx(I,{variant:"outline",size:"sm",onClick:Yt,children:"Select All"}),r.jsx(I,{variant:"outline",size:"sm",onClick:Bt,children:"Clear"})]})]}),b?r.jsx(Ie,{className:"h-48 border rounded-lg p-3",children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Ht.map(n=>r.jsxs("div",{className:K("flex items-center gap-2 p-2 rounded cursor-pointer transition-colors",x.includes(n.id)?"bg-primary/10":"hover:bg-muted/50"),onClick:()=>Xe(n.id),children:[r.jsx(we,{checked:x.includes(n.id),onCheckedChange:()=>Xe(n.id)}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:n.name}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.initials," · ",n.role]})]})]},n.id))})}):r.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.selectedEmployees.slice(0,10).map(n=>{const o=a.find(u=>u.id===n);return o?r.jsx(B,{variant:"outline",className:"text-xs",children:o.name},n):null}),l.selectedEmployees.length>10&&r.jsxs(B,{variant:"outline",className:"text-xs",children:["+",l.selectedEmployees.length-10," more"]})]})]}),b&&r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{children:[r.jsx(V,{className:"text-base font-semibold mb-3 block",children:"Parameters"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(V,{className:"text-sm font-medium mb-1.5 block",children:"Max Group Size"}),r.jsx(se,{type:"number",value:R,onChange:n=>Q(n.target.value),placeholder:"No limit"})]}),r.jsxs("div",{children:[r.jsx(V,{className:"text-sm font-medium mb-1.5 block",children:"Min Manhours"}),r.jsx(se,{type:"number",value:J,onChange:n=>re(n.target.value),placeholder:"216"})]})]})]})]}),!b&&l.selectedEmployees.length>0&&l.dateRanges.some(n=>n.startDate&&n.endDate)&&r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"flex justify-center",children:r.jsxs(I,{size:"lg",onClick:()=>A(!0),className:"px-8","data-testid":"button-check-availability",children:[r.jsx(_e,{className:"h-5 w-5 mr-2"}),"Check Availability"]})})]}),y&&Me.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{children:[r.jsx(V,{className:"text-base font-semibold mb-3 block",children:"Availability Results"}),et()&&l.dateRanges.length>1&&r.jsx("div",{className:"mb-4 p-3 bg-green-500/10 border border-green-500/30 rounded-lg",children:r.jsxs("p",{className:"text-sm font-medium text-green-600 dark:text-green-400 flex items-center gap-2",children:[r.jsx(_e,{className:"h-4 w-4"}),"Recommended: ",Re(et())]})}),l.dateRanges.map((n,o)=>{const u=Je(n.id),p=Me.filter(d=>d.dateRangeId===n.id),N=Gt[n.id];return r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsxs("span",{className:"font-medium",children:["Option ",o+1,": ",Re(n)]}),r.jsxs(B,{variant:"secondary",className:"bg-green-500/20 text-green-600",children:[u.available," available"]}),u.conflicts>0&&r.jsxs(B,{variant:"secondary",className:"bg-yellow-500/20 text-yellow-600",children:[u.conflicts," conflicts"]}),u.staffing>0&&r.jsxs(B,{variant:"secondary",className:"bg-red-500/20 text-red-600",children:[u.staffing," individual issues"]}),N&&N.length>0&&r.jsx(B,{variant:"destructive",className:"animate-pulse",children:"CRITICAL: Group Impact"})]}),N&&N.length>0&&r.jsxs("div",{className:"space-y-3 mb-3",children:[r.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(dt,{className:"h-5 w-5 text-red-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-red-700 dark:text-red-400 text-sm mb-1",children:"Training this group together causes staffing shortages:"}),r.jsx("div",{className:"space-y-1",children:N.map((d,v)=>r.jsxs("p",{className:"text-sm text-red-600 dark:text-red-300",children:["• ",d]},v))})]})]})}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs(I,{size:"sm",variant:"outline",className:"self-start gap-2 border-purple-200 hover:bg-purple-50 text-purple-700 dark:text-purple-300 dark:hover:bg-purple-900/20",onClick:Ft,disabled:Ve,children:[r.jsx(Ns,{className:"h-4 w-4"}),Ve?"Analyzing...":"Suggest Working Combinations"]}),Ce.filter(d=>d.rangeId===n.id).map((d,v)=>r.jsxs("div",{className:"p-3 bg-purple-50/50 dark:bg-purple-900/10 border border-purple-200 dark:border-purple-800 rounded-lg flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"font-semibold text-purple-700 dark:text-purple-300",children:"Suggestion: "}),r.jsx("span",{children:"Remove "}),r.jsx("span",{className:"font-medium",children:d.removed.map(j=>a.find(P=>P.id===j)?.initials).join(", ")})]}),r.jsx(I,{size:"sm",variant:"secondary",className:"h-7 text-xs",onClick:()=>Te(d.kept),children:"Apply"})]},v)),Ce.length>0&&Ce.filter(d=>d.rangeId===n.id).length===0&&r.jsx("p",{className:"text-xs text-muted-foreground ml-1",children:"No simple suggestions found for this date option."})]})]}),r.jsx("div",{className:"space-y-2",children:p.map(d=>{const v=d.conflicts.length>0||d.staffingImpact,j=he.includes(d.employeeId);return v?r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"pt-4 pl-3",children:r.jsx(we,{checked:j,onCheckedChange:()=>Se(d.employeeId)})}),r.jsxs(Ir,{className:"flex-1",children:[r.jsx(Or,{className:"w-full",children:r.jsx("div",{className:K("p-3 rounded border cursor-pointer transition-colors",d.status==="conflict"&&"bg-yellow-500/10 border-yellow-500/30 hover:bg-yellow-500/20",d.status==="staffing_issue"&&"bg-red-500/10 border-red-500/30 hover:bg-red-500/20",!j&&"opacity-60 bg-muted border-muted-foreground/20"),children:r.jsxs("div",{className:"flex items-center gap-2",children:[d.status==="conflict"&&r.jsx(ls,{className:"h-4 w-4 text-yellow-500"}),d.status==="staffing_issue"&&r.jsx(dt,{className:"h-4 w-4 text-red-500"}),r.jsx("span",{className:"text-sm font-medium",children:d.employeeName}),r.jsx(B,{variant:"secondary",className:K("ml-auto text-xs",d.status==="conflict"&&"bg-yellow-500/20 text-yellow-600",d.status==="staffing_issue"&&"bg-red-500/20 text-red-600"),children:d.status==="conflict"?"Has Conflicts":"Staffing Issue"}),r.jsx(cs,{className:"h-4 w-4 text-muted-foreground transition-transform group-data-[state=open]:rotate-180"})]})})}),r.jsx(_r,{children:r.jsxs("div",{className:K("mt-1 p-3 rounded border-l-4 ml-4",d.status==="conflict"&&"bg-yellow-500/5 border-yellow-500",d.status==="staffing_issue"&&"bg-red-500/5 border-red-500"),children:[d.conflicts.length>0&&r.jsxs("div",{className:"mb-2",children:[r.jsx("p",{className:"font-medium text-sm text-yellow-600 dark:text-yellow-400 mb-1",children:"Conflicts:"}),d.conflicts.map((P,E)=>r.jsxs("p",{className:"text-sm pl-2",children:["• ",Y(Z(P.date,"yyyy-MM-dd",new Date),"dd.MM.yyyy"),": ",r.jsx("span",{className:"font-medium",children:Le[P.code]?.label||P.code})]},E))]}),d.staffingImpact&&r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm text-red-600 dark:text-red-400 mb-1",children:"Staffing Issues:"}),d.staffingImpact.split(`
`).map((P,E)=>r.jsxs("p",{className:"text-sm pl-2",children:["• ",P]},E))]})]})})]})]},`${d.employeeId}-${d.dateRangeId}`):r.jsxs("div",{className:K("p-3 rounded border flex items-center gap-3",d.status==="available"&&"bg-green-500/10 border-green-500/30",!j&&"opacity-60"),children:[r.jsx(we,{checked:j,onCheckedChange:()=>Se(d.employeeId),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary"}),r.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[r.jsx(_e,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"text-sm font-medium",children:d.employeeName}),r.jsx(B,{variant:"secondary",className:"ml-auto text-xs bg-green-500/20 text-green-600",children:"Available"})]})]},`${d.employeeId}-${d.dateRangeId}`)})})]},n.id)})]})]})]})]}):r.jsx(te,{className:"h-[570px] flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-muted-foreground",children:[r.jsx(Ee,{className:"h-16 w-16 mx-auto mb-4 opacity-30"}),r.jsx("p",{className:"text-lg",children:"Select a training or create a new one"})]})})})]})}),r.jsx(ct,{value:"planner",className:"mt-0",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[r.jsx("div",{className:"lg:col-span-4",children:r.jsxs(te,{children:[r.jsx(pe,{children:r.jsx(ge,{children:"Training Goal"})}),r.jsxs(be,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(V,{children:"Select Training Type"}),r.jsxs(fs,{value:U,onValueChange:Qe,children:[r.jsx(hs,{children:r.jsx(xs,{placeholder:"Select a training type..."})}),r.jsx(ps,{children:Ne.map(n=>r.jsx(gs,{value:n.id,children:n.label},n.id))})]})]}),U&&(()=>{const n=Ne.find(o=>o.id===U);return r.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg space-y-2 text-sm",children:[r.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[r.jsx(Oe,{className:"h-4 w-4 text-primary"}),"Candidate Logic"]}),r.jsxs("ul",{className:"list-disc pl-4 space-y-1 text-muted-foreground",children:[n?.reqAircraft?r.jsxs("li",{children:[r.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"Include:"})," Holds B1/B1-2 License for ",n.reqAircraft]}):r.jsxs("li",{children:[r.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"Include:"})," All Staff (General Training)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"text-red-600 dark:text-red-400 font-medium",children:"Exclude:"})," Already holds ",n?.label]})]})]})})()]})]})}),r.jsx("div",{className:"lg:col-span-8",children:U?r.jsxs(te,{className:"h-full",children:[r.jsxs(pe,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[r.jsx(Ae,{className:"h-5 w-5"}),"Eligible Candidates (",ae.length,")"]}),r.jsxs(I,{onClick:At,disabled:ne.length===0,className:"gap-2",children:[r.jsx(Pe,{className:"h-4 w-4"}),"Create Training (",ne.length,")"]})]}),r.jsxs(be,{children:[r.jsx(Ie,{className:"h-[500px] border rounded-lg p-4",children:ae.length===0?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(Ae,{className:"h-12 w-12 mx-auto mb-3 opacity-20"}),r.jsx("p",{children:"No eligible candidates found for this training."}),r.jsx("p",{className:"text-sm mt-1",children:"Everyone eligible might already have this certification."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:ae.map(n=>r.jsxs("div",{className:K("flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all",ne.includes(n.id)?"bg-primary/5 border-primary shadow-sm":"hover:bg-muted/50 border-border"),onClick:()=>We(n.id),children:[r.jsx(we,{checked:ne.includes(n.id),onCheckedChange:()=>We(n.id),className:"mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:n.name}),r.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[r.jsx(B,{variant:"outline",className:"text-[10px] h-5 px-1.5",children:n.role}),r.jsx(B,{variant:"outline",className:"text-[10px] h-5 px-1.5",children:n.initials}),n.department&&r.jsx(B,{variant:"secondary",className:"text-[10px] h-5 px-1.5",children:n.department.replace("S/","")})]})]})]},n.id))})}),r.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-muted-foreground",children:[r.jsx("span",{children:"Select candidates to start planning a training session."}),ae.length>0&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx(I,{variant:"ghost",size:"sm",onClick:()=>fe(ae.map(n=>n.id)),children:"Select All"}),r.jsx(I,{variant:"ghost",size:"sm",onClick:()=>fe([]),children:"Clear"})]})]})]})]}):r.jsx(te,{className:"h-full flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"text-center text-muted-foreground max-w-sm mx-auto p-6",children:[r.jsx(Oe,{className:"h-16 w-16 mx-auto mb-4 opacity-20"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select a Training Goal"}),r.jsx("p",{children:"Choose a training type from the left to find eligible employees who need this certification."})]})})})]})})]})]})}export{Wr as TrainingPage,Wr as default};
