import{c as w,j as e,l as b,u as M,r as n,k as m,q as S,_ as C,a1 as A,m as B,n as D,B as E,o as O,y as P,z as f,P as g}from"./index-CI72K9i1.js";import{S as T,a as z,f as F,b as R,e as j}from"./select-DhOR1Qsq.js";import{S as I,a as L}from"./scroll-area-CMybtgpe.js";import{F as _}from"./funnel-DuIUxed1.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],$=w("calendar-days",V);function q({license:t,size:r="md"}){if(!t)return null;const a=()=>t==="B1"?"license-b1":t==="B2"?"license-b2":t==="B1/2"?"license-b12":t==="C"?"license-c":t==="A"?"bg-gray-500 text-white":"bg-muted text-muted-foreground",x={sm:"text-[9px] px-1 py-0.5 min-w-[22px]",md:"text-[10px] px-1.5 py-0.5 min-w-[28px]"};return e.jsx("span",{"data-testid":`badge-license-${t}`,className:b("inline-flex items-center justify-center font-mono font-bold rounded transition-colors",a(),x[r]),children:t})}function K(){const{employees:t,assignments:r}=M(),[a,x]=n.useState("date"),[d,y]=n.useState(new Date),[N,p]=n.useState(!1),i=m(d,"yyyy-MM-dd"),h=n.useMemo(()=>a==="all"?t:r.filter(s=>s.date===i&&S(s.shiftCode)).map(s=>t.find(l=>l.id===s.employeeId)).filter(s=>s!==void 0),[t,r,i,a]),v=n.useMemo(()=>C.map(s=>{const l=A(t,r,i,s);return{type:s,...l}}).filter(s=>s.b1>0||s.b2>0||s.b12>0),[t,r,i]),u=["B777","A343","A220","A330 RR","A350","A320 NEO","A320 CF"];return e.jsxs("div",{className:"p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-display font-bold tracking-tight",children:"Skills Matrix"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Aircraft type qualifications and license overview"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(B,{open:N,onOpenChange:p,children:[e.jsx(D,{asChild:!0,children:e.jsxs(E,{variant:"outline",className:"gap-2","data-testid":"button-date-picker",children:[e.jsx($,{className:"w-4 h-4"}),m(d,"MMM d, yyyy")]})}),e.jsx(O,{className:"w-auto p-0",align:"end",children:e.jsx(P,{mode:"single",selected:d,onSelect:s=>{s&&(y(s),p(!1))},weekStartsOn:1,initialFocus:!0})})]}),e.jsxs(T,{value:a,onValueChange:s=>x(s),children:[e.jsxs(z,{className:"w-[160px]","data-testid":"select-view-mode",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),e.jsx(F,{})]}),e.jsxs(R,{children:[e.jsx(j,{value:"date",children:"On Duty (Date)"}),e.jsx(j,{value:"all",children:"All Employees"})]})]})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:v.map(({type:s,b1:l,b2:c,b12:o})=>e.jsxs(f,{className:"p-4","data-testid":`card-aircraft-${s.replace(/\s/g,"-")}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(g,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display font-semibold",children:s}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a==="date"?m(d,"MMM d, yyyy"):"All staff"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"text-center p-2 rounded-lg bg-blue-50 dark:bg-blue-950/30",children:[e.jsx("div",{className:"text-2xl font-display font-bold text-blue-600 dark:text-blue-400",children:l}),e.jsx("div",{className:"text-xs font-medium text-blue-600/70 dark:text-blue-400/70",children:"B1"})]}),e.jsxs("div",{className:"text-center p-2 rounded-lg bg-emerald-50 dark:bg-emerald-950/30",children:[e.jsx("div",{className:"text-2xl font-display font-bold text-emerald-600 dark:text-emerald-400",children:c}),e.jsx("div",{className:"text-xs font-medium text-emerald-600/70 dark:text-emerald-400/70",children:"B2"})]}),e.jsxs("div",{className:"text-center p-2 rounded-lg bg-gradient-to-r from-blue-50 to-emerald-50 dark:from-blue-950/30 dark:to-emerald-950/30",children:[e.jsx("div",{className:"text-2xl font-display font-bold bg-gradient-to-r from-blue-600 to-emerald-600 bg-clip-text text-transparent",children:o}),e.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"B1/2"})]})]})]},s))}),e.jsxs(f,{className:"overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-border bg-muted/30",children:[e.jsx("h2",{className:"font-display font-semibold text-lg",children:"Employee Skills Detail"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[h.length," employees ",a==="date"?`on duty ${m(d,"MMM d")}`:"total"]})]}),e.jsxs(I,{className:"w-full",children:[e.jsx("div",{className:"min-w-[900px]",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border bg-muted/20",children:[e.jsx("th",{className:"text-left p-3 font-medium text-muted-foreground sticky left-0 bg-card z-10 min-w-[180px]",children:"Employee"}),u.map(s=>e.jsx("th",{className:"p-3 text-center min-w-[80px]",children:e.jsx("div",{className:"text-xs font-medium",children:s})},s))]})}),e.jsx("tbody",{children:h.map((s,l)=>e.jsxs("tr",{className:b("border-b border-border/50 hover:bg-muted/30 transition-colors",l%2===0&&"bg-muted/10"),children:[e.jsx("td",{className:"p-3 sticky left-0 bg-card z-10 border-r border-border/50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-xs font-semibold text-primary",children:s.initials}),e.jsx("span",{className:"text-sm",children:s.name.split(",")[0]})]})}),u.map(c=>{const o=s.skills.find(k=>k.aircraftType===c);return e.jsx("td",{className:"p-3 text-center",children:o?e.jsx(q,{license:o.license}):e.jsx("span",{className:"text-muted-foreground/30",children:"â€”"})},c)})]},s.id))})]})}),e.jsx(L,{orientation:"horizontal"})]}),h.length===0&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(g,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"font-display font-semibold text-lg mb-2",children:"No employees on duty"}),e.jsx("p",{className:"text-muted-foreground",children:"Select a different date using the date picker, or view all employees"})]})]})]})}export{K as SkillsPage};
